(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.HeliaMfs = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var HeliaMfs=(()=>{var su=Object.create;var vr=Object.defineProperty;var au=Object.getOwnPropertyDescriptor;var cu=Object.getOwnPropertyNames;var uu=Object.getPrototypeOf,fu=Object.prototype.hasOwnProperty;var nt=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),K=(r,t)=>{for(var e in t)vr(r,e,{get:t[e],enumerable:!0})},ro=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of cu(t))!fu.call(r,i)&&i!==e&&vr(r,i,{get:()=>t[i],enumerable:!(n=au(t,i))||n.enumerable});return r};var P=(r,t,e)=>(e=r!=null?su(uu(r)):{},ro(t||!r||!r.__esModule?vr(e,"default",{value:r,enumerable:!0}):e,r)),lu=r=>ro(vr({},"__esModule",{value:!0}),r);var q=nt((Z1,io)=>{"use strict";function no(r,t){for(let e in t)Object.defineProperty(r,e,{value:t[e],enumerable:!0,configurable:!0});return r}function hu(r,t,e){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");e||(e={}),typeof t=="object"&&(e=t,t=""),t&&(e.code=t);try{return no(r,e)}catch{e.message=r.message,e.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),no(new i,e)}}io.exports=hu});var us=nt((ar,Rr)=>{(function(r,t){"use strict";var e={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function n(u){if(!Array.isArray(u)&&!ArrayBuffer.isView(u))return!1;for(var d=0;d<u.length;d++)if(!Number.isInteger(u[d])||u[d]<0||u[d]>255)return!1;return!0}function i(u,d){return(u&65535)*d+(((u>>>16)*d&65535)<<16)}function o(u,d){return u<<d|u>>>32-d}function s(u){return u^=u>>>16,u=i(u,2246822507),u^=u>>>13,u=i(u,3266489909),u^=u>>>16,u}function a(u,d){u=[u[0]>>>16,u[0]&65535,u[1]>>>16,u[1]&65535],d=[d[0]>>>16,d[0]&65535,d[1]>>>16,d[1]&65535];var y=[0,0,0,0];return y[3]+=u[3]+d[3],y[2]+=y[3]>>>16,y[3]&=65535,y[2]+=u[2]+d[2],y[1]+=y[2]>>>16,y[2]&=65535,y[1]+=u[1]+d[1],y[0]+=y[1]>>>16,y[1]&=65535,y[0]+=u[0]+d[0],y[0]&=65535,[y[0]<<16|y[1],y[2]<<16|y[3]]}function c(u,d){u=[u[0]>>>16,u[0]&65535,u[1]>>>16,u[1]&65535],d=[d[0]>>>16,d[0]&65535,d[1]>>>16,d[1]&65535];var y=[0,0,0,0];return y[3]+=u[3]*d[3],y[2]+=y[3]>>>16,y[3]&=65535,y[2]+=u[2]*d[3],y[1]+=y[2]>>>16,y[2]&=65535,y[2]+=u[3]*d[2],y[1]+=y[2]>>>16,y[2]&=65535,y[1]+=u[1]*d[3],y[0]+=y[1]>>>16,y[1]&=65535,y[1]+=u[2]*d[2],y[0]+=y[1]>>>16,y[1]&=65535,y[1]+=u[3]*d[1],y[0]+=y[1]>>>16,y[1]&=65535,y[0]+=u[0]*d[3]+u[1]*d[2]+u[2]*d[1]+u[3]*d[0],y[0]&=65535,[y[0]<<16|y[1],y[2]<<16|y[3]]}function h(u,d){return d%=64,d===32?[u[1],u[0]]:d<32?[u[0]<<d|u[1]>>>32-d,u[1]<<d|u[0]>>>32-d]:(d-=32,[u[1]<<d|u[0]>>>32-d,u[0]<<d|u[1]>>>32-d])}function f(u,d){return d%=64,d===0?u:d<32?[u[0]<<d|u[1]>>>32-d,u[1]<<d]:[u[1]<<d-32,0]}function l(u,d){return[u[0]^d[0],u[1]^d[1]]}function m(u){return u=l(u,[0,u[0]>>>1]),u=c(u,[4283543511,3981806797]),u=l(u,[0,u[0]>>>1]),u=c(u,[3301882366,444984403]),u=l(u,[0,u[0]>>>1]),u}e.x86.hash32=function(u,d){if(e.inputValidation&&!n(u))return t;d=d||0;for(var y=u.length%4,_=u.length-y,g=d,w=0,b=3432918353,E=461845907,v=0;v<_;v=v+4)w=u[v]|u[v+1]<<8|u[v+2]<<16|u[v+3]<<24,w=i(w,b),w=o(w,15),w=i(w,E),g^=w,g=o(g,13),g=i(g,5)+3864292196;switch(w=0,y){case 3:w^=u[v+2]<<16;case 2:w^=u[v+1]<<8;case 1:w^=u[v],w=i(w,b),w=o(w,15),w=i(w,E),g^=w}return g^=u.length,g=s(g),g>>>0},e.x86.hash128=function(u,d){if(e.inputValidation&&!n(u))return t;d=d||0;for(var y=u.length%16,_=u.length-y,g=d,w=d,b=d,E=d,v=0,S=0,x=0,B=0,N=597399067,U=2869860233,H=951274213,mt=2716044179,D=0;D<_;D=D+16)v=u[D]|u[D+1]<<8|u[D+2]<<16|u[D+3]<<24,S=u[D+4]|u[D+5]<<8|u[D+6]<<16|u[D+7]<<24,x=u[D+8]|u[D+9]<<8|u[D+10]<<16|u[D+11]<<24,B=u[D+12]|u[D+13]<<8|u[D+14]<<16|u[D+15]<<24,v=i(v,N),v=o(v,15),v=i(v,U),g^=v,g=o(g,19),g+=w,g=i(g,5)+1444728091,S=i(S,U),S=o(S,16),S=i(S,H),w^=S,w=o(w,17),w+=b,w=i(w,5)+197830471,x=i(x,H),x=o(x,17),x=i(x,mt),b^=x,b=o(b,15),b+=E,b=i(b,5)+2530024501,B=i(B,mt),B=o(B,18),B=i(B,N),E^=B,E=o(E,13),E+=g,E=i(E,5)+850148119;switch(v=0,S=0,x=0,B=0,y){case 15:B^=u[D+14]<<16;case 14:B^=u[D+13]<<8;case 13:B^=u[D+12],B=i(B,mt),B=o(B,18),B=i(B,N),E^=B;case 12:x^=u[D+11]<<24;case 11:x^=u[D+10]<<16;case 10:x^=u[D+9]<<8;case 9:x^=u[D+8],x=i(x,H),x=o(x,17),x=i(x,mt),b^=x;case 8:S^=u[D+7]<<24;case 7:S^=u[D+6]<<16;case 6:S^=u[D+5]<<8;case 5:S^=u[D+4],S=i(S,U),S=o(S,16),S=i(S,H),w^=S;case 4:v^=u[D+3]<<24;case 3:v^=u[D+2]<<16;case 2:v^=u[D+1]<<8;case 1:v^=u[D],v=i(v,N),v=o(v,15),v=i(v,U),g^=v}return g^=u.length,w^=u.length,b^=u.length,E^=u.length,g+=w,g+=b,g+=E,w+=g,b+=g,E+=g,g=s(g),w=s(w),b=s(b),E=s(E),g+=w,g+=b,g+=E,w+=g,b+=g,E+=g,("00000000"+(g>>>0).toString(16)).slice(-8)+("00000000"+(w>>>0).toString(16)).slice(-8)+("00000000"+(b>>>0).toString(16)).slice(-8)+("00000000"+(E>>>0).toString(16)).slice(-8)},e.x64.hash128=function(u,d){if(e.inputValidation&&!n(u))return t;d=d||0;for(var y=u.length%16,_=u.length-y,g=[0,d],w=[0,d],b=[0,0],E=[0,0],v=[2277735313,289559509],S=[1291169091,658871167],x=0;x<_;x=x+16)b=[u[x+4]|u[x+5]<<8|u[x+6]<<16|u[x+7]<<24,u[x]|u[x+1]<<8|u[x+2]<<16|u[x+3]<<24],E=[u[x+12]|u[x+13]<<8|u[x+14]<<16|u[x+15]<<24,u[x+8]|u[x+9]<<8|u[x+10]<<16|u[x+11]<<24],b=c(b,v),b=h(b,31),b=c(b,S),g=l(g,b),g=h(g,27),g=a(g,w),g=a(c(g,[0,5]),[0,1390208809]),E=c(E,S),E=h(E,33),E=c(E,v),w=l(w,E),w=h(w,31),w=a(w,g),w=a(c(w,[0,5]),[0,944331445]);switch(b=[0,0],E=[0,0],y){case 15:E=l(E,f([0,u[x+14]],48));case 14:E=l(E,f([0,u[x+13]],40));case 13:E=l(E,f([0,u[x+12]],32));case 12:E=l(E,f([0,u[x+11]],24));case 11:E=l(E,f([0,u[x+10]],16));case 10:E=l(E,f([0,u[x+9]],8));case 9:E=l(E,[0,u[x+8]]),E=c(E,S),E=h(E,33),E=c(E,v),w=l(w,E);case 8:b=l(b,f([0,u[x+7]],56));case 7:b=l(b,f([0,u[x+6]],48));case 6:b=l(b,f([0,u[x+5]],40));case 5:b=l(b,f([0,u[x+4]],32));case 4:b=l(b,f([0,u[x+3]],24));case 3:b=l(b,f([0,u[x+2]],16));case 2:b=l(b,f([0,u[x+1]],8));case 1:b=l(b,[0,u[x]]),b=c(b,v),b=h(b,31),b=c(b,S),g=l(g,b)}return g=l(g,[0,u.length]),w=l(w,[0,u.length]),g=a(g,w),w=a(w,g),g=m(g),w=m(w),g=a(g,w),w=a(w,g),("00000000"+(g[0]>>>0).toString(16)).slice(-8)+("00000000"+(g[1]>>>0).toString(16)).slice(-8)+("00000000"+(w[0]>>>0).toString(16)).slice(-8)+("00000000"+(w[1]>>>0).toString(16)).slice(-8)},typeof ar<"u"?(typeof Rr<"u"&&Rr.exports&&(ar=Rr.exports=e),ar.murmurHash3=e):typeof define=="function"&&define.amd?define([],function(){return e}):(e._murmurHash3=r.murmurHash3,e.noConflict=function(){return r.murmurHash3=e._murmurHash3,e._murmurHash3=t,e.noConflict=t,e},r.murmurHash3=e)})(ar)});var ls=nt((Vp,fs)=>{fs.exports=us()});var $r=nt((Kp,ds)=>{"use strict";ds.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(t,e){let n=this._internalPositionFor(t,!1);if(e===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(t),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(t),this._changedData=!0):i=!0,this._setInternalPos(n,t,e,i),this._changedLength=!0}}unset(t){this.set(t,void 0)}get(t){this._sortData();let e=this._internalPositionFor(t,!0);if(e!==-1)return this._data[e][1]}push(t){return this.set(this.length,t),this.length}get length(){if(this._sortData(),this._changedLength){let t=this._data[this._data.length-1];this._length=t?t[0]+1:0,this._changedLength=!1}return this._length}forEach(t){let e=0;for(;e<this.length;)t(this.get(e),e,this),e++}map(t){let e=0,n=new Array(this.length);for(;e<this.length;)n[e]=t(this.get(e),e,this),e++;return n}reduce(t,e){let n=0,i=e;for(;n<this.length;){let o=this.get(n);i=t(i,o,n),n++}return i}find(t){let e=0,n,i;for(;e<this.length&&!n;)i=this.get(e),n=t(i),e++;return n?i:void 0}_internalPositionFor(t,e){let n=this._bytePosFor(t,e);if(n>=this._bitArrays.length)return-1;let i=this._bitArrays[n],o=t-n*7;if(!((i&1<<o)>0))return-1;let a=this._bitArrays.slice(0,n).reduce(cl,0),c=~(4294967295<<o+1),h=hs(i&c);return a+h-1}_bytePosFor(t,e){let n=Math.floor(t/7),i=n+1;for(;!e&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(t){let e=this._bytePosFor(t,!1);this._bitArrays[e]|=1<<t-e*7}_unsetBit(t){let e=this._bytePosFor(t,!1);this._bitArrays[e]&=~(1<<t-e*7)}_setInternalPos(t,e,n,i){let o=this._data,s=[e,n];if(i)this._sortData(),o[t]=s;else{if(o.length)if(o[o.length-1][0]>=e)o.push(s);else if(o[0][0]<=e)o.unshift(s);else{let a=Math.round(o.length/2);this._data=o.slice(0,a).concat(s).concat(o.slice(a))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(t){this._data.splice(t,1)}_sortData(){this._changedData&&this._data.sort(ul),this._changedData=!1}bitField(){let t=[],e=8,n=0,i=0,o,s=this._bitArrays.slice();for(;s.length||n;){n===0&&(o=s.shift(),n=7);let c=Math.min(n,e),h=~(255<<c),f=o&h;i|=f<<8-e,o=o>>>c,n-=c,e-=c,(!e||!n&&!s.length)&&(t.push(i),i=0,e=8)}for(var a=t.length-1;a>0&&t[a]===0;a--)t.pop();return t}compactArray(){return this._sortData(),this._data.map(fl)}};function cl(r,t){return r+hs(t)}function hs(r){let t=r;return t=t-(t>>1&1431655765),t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>24}function ul(r,t){return r[0]-t[0]}function fl(r){return r[1]}});var vs=nt((Tm,Is)=>{var Si=class{constructor(t,e=12,n=8*1024,i=32*1024,o=64,s){this.bits=e,this.min=n,this.max=i,this.asModule=t,this.rabin=new t.Rabin(e,n,i,o,s),this.polynomial=s}fingerprint(t){let{__retain:e,__release:n,__allocArray:i,__getInt32Array:o,Int32Array_ID:s,Uint8Array_ID:a}=this.asModule,c=new Int32Array(Math.ceil(t.length/this.min)),h=e(i(s,c)),f=e(i(a,t)),l=this.rabin.fingerprint(f,h),m=o(l);n(f),n(h);let u=m.indexOf(0);return u>=0?m.subarray(0,u):m}};Is.exports=Si});var Ls=nt(fr=>{"use strict";var Al=typeof BigUint64Array<"u",cr=Symbol(),ur=1024;function Ts(r,t){let e=new Uint32Array(r),n=new Uint16Array(r);var i=e[t+-4>>>2]>>>1,o=t>>>1;if(i<=ur)return String.fromCharCode.apply(String,n.subarray(o,o+i));let s=[];do{let a=n[o+ur-1],c=a>=55296&&a<56320?ur-1:ur;s.push(String.fromCharCode.apply(String,n.subarray(o,o+=c))),i-=c}while(i>ur);return s.join("")+String.fromCharCode.apply(String,n.subarray(o,o+i))}function ki(r){let t={};function e(i,o){return i?Ts(i.buffer,o):"<yet unknown>"}let n=r.env=r.env||{};return n.abort=n.abort||function(o,s,a,c){let h=t.memory||n.memory;throw Error("abort: "+e(h,o)+" at "+e(h,s)+":"+a+":"+c)},n.trace=n.trace||function(o,s){let a=t.memory||n.memory;console.log("trace: "+e(a,o)+(s?" ":"")+Array.prototype.slice.call(arguments,2,2+s).join(", "))},r.Math=r.Math||Math,r.Date=r.Date||Date,t}function Bi(r,t){let e=t.exports,n=e.memory,i=e.table,o=e.__alloc,s=e.__retain,a=e.__rtti_base||-1;function c(S){let x=new Uint32Array(n.buffer),B=x[a>>>2];if((S>>>=0)>=B)throw Error("invalid id: "+S);return x[(a+4>>>2)+S*2]}function h(S){let x=new Uint32Array(n.buffer),B=x[a>>>2];if((S>>>=0)>=B)throw Error("invalid id: "+S);return x[(a+4>>>2)+S*2+1]}function f(S){return 31-Math.clz32(S>>>5&31)}function l(S){return 31-Math.clz32(S>>>14&31)}function m(S){let x=S.length,B=o(x<<1,1),N=new Uint16Array(n.buffer);for(var U=0,H=B>>>1;U<x;++U)N[H+U]=S.charCodeAt(U);return B}r.__allocString=m;function u(S){let x=n.buffer;if(new Uint32Array(x)[S+-8>>>2]!==1)throw Error("not a string: "+S);return Ts(x,S)}r.__getString=u;function d(S,x,B){let N=n.buffer;if(B)switch(S){case 2:return new Float32Array(N);case 3:return new Float64Array(N)}else switch(S){case 0:return new(x?Int8Array:Uint8Array)(N);case 1:return new(x?Int16Array:Uint16Array)(N);case 2:return new(x?Int32Array:Uint32Array)(N);case 3:return new(x?BigInt64Array:BigUint64Array)(N)}throw Error("unsupported align: "+S)}function y(S,x){let B=c(S);if(!(B&3))throw Error("not an array: "+S+" @ "+B);let N=f(B),U=x.length,H=o(U<<N,0),mt=o(B&2?16:12,S),D=new Uint32Array(n.buffer);D[mt+0>>>2]=s(H),D[mt+4>>>2]=H,D[mt+8>>>2]=U<<N,B&2&&(D[mt+12>>>2]=U);let eo=d(N,B&1024,B&2048);if(B&8192)for(let Ir=0;Ir<U;++Ir)eo[(H>>>N)+Ir]=s(x[Ir]);else eo.set(x,H>>>N);return mt}r.__allocArray=y;function _(S){let x=new Uint32Array(n.buffer),B=x[S+-8>>>2],N=c(B);if(!(N&1))throw Error("not an array: "+B);let U=f(N);var H=x[S+4>>>2];let mt=N&2?x[S+12>>>2]:x[H+-4>>>2]>>>U;return d(U,N&1024,N&2048).subarray(H>>>=U,H+mt)}r.__getArrayView=_;function g(S){let x=_(S),B=x.length,N=new Array(B);for(let U=0;U<B;U++)N[U]=x[U];return N}r.__getArray=g;function w(S){let x=n.buffer,B=new Uint32Array(x)[S+-4>>>2];return x.slice(S,S+B)}r.__getArrayBuffer=w;function b(S,x,B){return new S(E(S,x,B))}function E(S,x,B){let N=n.buffer,U=new Uint32Array(N),H=U[B+4>>>2];return new S(N,H,U[H+-4>>>2]>>>x)}r.__getInt8Array=b.bind(null,Int8Array,0),r.__getInt8ArrayView=E.bind(null,Int8Array,0),r.__getUint8Array=b.bind(null,Uint8Array,0),r.__getUint8ArrayView=E.bind(null,Uint8Array,0),r.__getUint8ClampedArray=b.bind(null,Uint8ClampedArray,0),r.__getUint8ClampedArrayView=E.bind(null,Uint8ClampedArray,0),r.__getInt16Array=b.bind(null,Int16Array,1),r.__getInt16ArrayView=E.bind(null,Int16Array,1),r.__getUint16Array=b.bind(null,Uint16Array,1),r.__getUint16ArrayView=E.bind(null,Uint16Array,1),r.__getInt32Array=b.bind(null,Int32Array,2),r.__getInt32ArrayView=E.bind(null,Int32Array,2),r.__getUint32Array=b.bind(null,Uint32Array,2),r.__getUint32ArrayView=E.bind(null,Uint32Array,2),Al&&(r.__getInt64Array=b.bind(null,BigInt64Array,3),r.__getInt64ArrayView=E.bind(null,BigInt64Array,3),r.__getUint64Array=b.bind(null,BigUint64Array,3),r.__getUint64ArrayView=E.bind(null,BigUint64Array,3)),r.__getFloat32Array=b.bind(null,Float32Array,2),r.__getFloat32ArrayView=E.bind(null,Float32Array,2),r.__getFloat64Array=b.bind(null,Float64Array,3),r.__getFloat64ArrayView=E.bind(null,Float64Array,3);function v(S,x){let B=new Uint32Array(n.buffer);var N=B[S+-8>>>2];if(N<=B[a>>>2])do if(N==x)return!0;while(N=h(N));return!1}return r.__instanceof=v,r.memory=r.memory||n,r.table=r.table||i,Fs(e,r)}function Ns(r){return typeof Response<"u"&&r instanceof Response}async function Cs(r,t){return Ns(r=await r)?Ds(r,t):Bi(ki(t||(t={})),await WebAssembly.instantiate(r instanceof WebAssembly.Module?r:await WebAssembly.compile(r),t))}fr.instantiate=Cs;function Sl(r,t){return Bi(ki(t||(t={})),new WebAssembly.Instance(r instanceof WebAssembly.Module?r:new WebAssembly.Module(r),t))}fr.instantiateSync=Sl;async function Ds(r,t){return WebAssembly.instantiateStreaming?Bi(ki(t||(t={})),(await WebAssembly.instantiateStreaming(r,t)).instance):Cs(Ns(r=await r)?r.arrayBuffer():r,t)}fr.instantiateStreaming=Ds;function Fs(r,t){var e=t?Object.create(t):{},n=r.__argumentsLength?function(i){r.__argumentsLength.value=i}:r.__setArgumentsLength||r.__setargc||function(){};for(let i in r){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=r[i],s=i.split("."),a=e;for(;s.length>1;){let f=s.shift();Object.prototype.hasOwnProperty.call(a,f)||(a[f]={}),a=a[f]}let c=s[0],h=c.indexOf("#");if(h>=0){let f=c.substring(0,h),l=a[f];if(typeof l>"u"||!l.prototype){let m=function(...u){return m.wrap(m.prototype.constructor(0,...u))};m.prototype={valueOf:function(){return this[cr]}},m.wrap=function(u){return Object.create(m.prototype,{[cr]:{value:u,writable:!1}})},l&&Object.getOwnPropertyNames(l).forEach(u=>Object.defineProperty(m,u,Object.getOwnPropertyDescriptor(l,u))),a[f]=m}if(c=c.substring(h+1),a=a[f].prototype,/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(a,c=c.substring(4))){let m=r[i.replace("set:","get:")],u=r[i.replace("get:","set:")];Object.defineProperty(a,c,{get:function(){return m(this[cr])},set:function(d){u(this[cr],d)},enumerable:!0})}}else c==="constructor"?(a[c]=(...m)=>(n(m.length),o(...m))).original=o:(a[c]=function(...m){return n(m.length),o(this[cr],...m)}).original=o}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(a,c=c.substring(4))||Object.defineProperty(a,c,{get:r[i.replace("set:","get:")],set:r[i.replace("get:","set:")],enumerable:!0}):typeof o=="function"&&o!==n?(a[c]=(...f)=>(n(f.length),o(...f))).original=o:a[c]=o}return e}fr.demangle=Fs});var Ps=nt((Cm,Us)=>{var{instantiate:kl}=Ls();Ii.supported=typeof WebAssembly<"u";function Ii(r={}){if(!Ii.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return kl(new Response(new Blob([t],{type:"application/wasm"})),r)}Us.exports=Ii});var Os=nt((Dm,Rs)=>{var zs=vs(),Bl=Ps(),Il=async(r,t,e,n,i)=>{let o=await Bl();return new zs(o,r,t,e,n,i)};Rs.exports={Rabin:zs,create:Il}});var gc=nt((o3,Vi)=>{"use strict";var Ph=Object.prototype.hasOwnProperty,tt="~";function br(){}Object.create&&(br.prototype=Object.create(null),new br().__proto__||(tt=!1));function zh(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function yc(r,t,e,n,i){if(typeof e!="function")throw new TypeError("The listener must be a function");var o=new zh(e,n||r,i),s=tt?tt+t:t;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],o]:r._events[s].push(o):(r._events[s]=o,r._eventsCount++),r}function cn(r,t){--r._eventsCount===0?r._events=new br:delete r._events[t]}function J(){this._events=new br,this._eventsCount=0}J.prototype.eventNames=function(){var t=[],e,n;if(this._eventsCount===0)return t;for(n in e=this._events)Ph.call(e,n)&&t.push(tt?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};J.prototype.listeners=function(t){var e=tt?tt+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};J.prototype.listenerCount=function(t){var e=tt?tt+t:t,n=this._events[e];return n?n.fn?1:n.length:0};J.prototype.emit=function(t,e,n,i,o,s){var a=tt?tt+t:t;if(!this._events[a])return!1;var c=this._events[a],h=arguments.length,f,l;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,i),!0;case 5:return c.fn.call(c.context,e,n,i,o),!0;case 6:return c.fn.call(c.context,e,n,i,o,s),!0}for(l=1,f=new Array(h-1);l<h;l++)f[l-1]=arguments[l];c.fn.apply(c.context,f)}else{var m=c.length,u;for(l=0;l<m;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,i);break;default:if(!f)for(u=1,f=new Array(h-1);u<h;u++)f[u-1]=arguments[u];c[l].fn.apply(c[l].context,f)}}return!0};J.prototype.on=function(t,e,n){return yc(this,t,e,n,!1)};J.prototype.once=function(t,e,n){return yc(this,t,e,n,!0)};J.prototype.removeListener=function(t,e,n,i){var o=tt?tt+t:t;if(!this._events[o])return this;if(!e)return cn(this,o),this;var s=this._events[o];if(s.fn)s.fn===e&&(!i||s.once)&&(!n||s.context===n)&&cn(this,o);else{for(var a=0,c=[],h=s.length;a<h;a++)(s[a].fn!==e||i&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=c.length===1?c[0]:c:cn(this,o)}return this};J.prototype.removeAllListeners=function(t){var e;return t?(e=tt?tt+t:t,this._events[e]&&cn(this,e)):(this._events=new br,this._eventsCount=0),this};J.prototype.off=J.prototype.removeListener;J.prototype.addListener=J.prototype.on;J.prefixed=tt;J.EventEmitter=J;typeof Vi<"u"&&(Vi.exports=J)});var vc=nt((J3,Ic)=>{"use strict";Ic.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let t=Object.getPrototypeOf(r);return t===null||t===Object.prototype}});var Lc=nt((Dc,Fc)=>{"use strict";var hn=vc(),{hasOwnProperty:Nc}=Object.prototype,{propertyIsEnumerable:Wh}=Object,Le=(r,t,e)=>Object.defineProperty(r,t,{value:e,writable:!0,enumerable:!0,configurable:!0}),Yh=Dc,Tc={concatArrays:!1,ignoreUndefined:!1},dn=r=>{let t=[];for(let e in r)Nc.call(r,e)&&t.push(e);if(Object.getOwnPropertySymbols){let e=Object.getOwnPropertySymbols(r);for(let n of e)Wh.call(r,n)&&t.push(n)}return t};function Ue(r){return Array.isArray(r)?Kh(r):hn(r)?qh(r):r}function Kh(r){let t=r.slice(0,0);return dn(r).forEach(e=>{Le(t,e,Ue(r[e]))}),t}function qh(r){let t=Object.getPrototypeOf(r)===null?Object.create(null):{};return dn(r).forEach(e=>{Le(t,e,Ue(r[e]))}),t}var Cc=(r,t,e,n)=>(e.forEach(i=>{typeof t[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?Le(r,i,Ki(r[i],t[i],n)):Le(r,i,Ue(t[i])))}),r),Xh=(r,t,e)=>{let n=r.slice(0,0),i=0;return[r,t].forEach(o=>{let s=[];for(let a=0;a<o.length;a++)Nc.call(o,a)&&(s.push(String(a)),o===r?Le(n,i++,o[a]):Le(n,i++,Ue(o[a])));n=Cc(n,o,dn(o).filter(a=>!s.includes(a)),e)}),n};function Ki(r,t,e){return e.concatArrays&&Array.isArray(r)&&Array.isArray(t)?Xh(r,t,e):!hn(t)||!hn(r)?Ue(t):Cc(r,t,dn(t),e)}Fc.exports=function(...r){let t=Ki(Ue(Tc),this!==Yh&&this||{},Tc),e={_:{}};for(let n of r)if(n!==void 0){if(!hn(n))throw new TypeError("`"+n+"` is not an Option Object");e=Ki(e,{_:n},t)}return e._}});var zc=nt((tg,Pc)=>{var ze=1e3,Re=ze*60,Oe=Re*60,le=Oe*24,Jh=le*7,Zh=le*365.25;Pc.exports=function(r,t){t=t||{};var e=typeof r;if(e==="string"&&r.length>0)return Qh(r);if(e==="number"&&isFinite(r))return t.long?e1(r):t1(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Qh(r){if(r=String(r),!(r.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(t){var e=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return e*Zh;case"weeks":case"week":case"w":return e*Jh;case"days":case"day":case"d":return e*le;case"hours":case"hour":case"hrs":case"hr":case"h":return e*Oe;case"minutes":case"minute":case"mins":case"min":case"m":return e*Re;case"seconds":case"second":case"secs":case"sec":case"s":return e*ze;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e;default:return}}}}function t1(r){var t=Math.abs(r);return t>=le?Math.round(r/le)+"d":t>=Oe?Math.round(r/Oe)+"h":t>=Re?Math.round(r/Re)+"m":t>=ze?Math.round(r/ze)+"s":r+"ms"}function e1(r){var t=Math.abs(r);return t>=le?mn(r,t,le,"day"):t>=Oe?mn(r,t,Oe,"hour"):t>=Re?mn(r,t,Re,"minute"):t>=ze?mn(r,t,ze,"second"):r+" ms"}function mn(r,t,e,n){var i=t>=e*1.5;return Math.round(r/e)+" "+n+(i?"s":"")}});var Oc=nt((eg,Rc)=>{function r1(r){e.debug=e,e.default=e,e.coerce=c,e.disable=o,e.enable=i,e.enabled=s,e.humanize=zc(),e.destroy=h,Object.keys(r).forEach(f=>{e[f]=r[f]}),e.names=[],e.skips=[],e.formatters={};function t(f){let l=0;for(let m=0;m<f.length;m++)l=(l<<5)-l+f.charCodeAt(m),l|=0;return e.colors[Math.abs(l)%e.colors.length]}e.selectColor=t;function e(f){let l,m=null,u,d;function y(..._){if(!y.enabled)return;let g=y,w=Number(new Date),b=w-(l||w);g.diff=b,g.prev=l,g.curr=w,l=w,_[0]=e.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(S,x)=>{if(S==="%%")return"%";E++;let B=e.formatters[x];if(typeof B=="function"){let N=_[E];S=B.call(g,N),_.splice(E,1),E--}return S}),e.formatArgs.call(g,_),(g.log||e.log).apply(g,_)}return y.namespace=f,y.useColors=e.useColors(),y.color=e.selectColor(f),y.extend=n,y.destroy=e.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(u!==e.namespaces&&(u=e.namespaces,d=e.enabled(f)),d),set:_=>{m=_}}),typeof e.init=="function"&&e.init(y),y}function n(f,l){let m=e(this.namespace+(typeof l>"u"?":":l)+f);return m.log=this.log,m}function i(f){e.save(f),e.namespaces=f,e.names=[],e.skips=[];let l,m=(typeof f=="string"?f:"").split(/[\s,]+/),u=m.length;for(l=0;l<u;l++)m[l]&&(f=m[l].replace(/\*/g,".*?"),f[0]==="-"?e.skips.push(new RegExp("^"+f.slice(1)+"$")):e.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...e.names.map(a),...e.skips.map(a).map(l=>"-"+l)].join(",");return e.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let l,m;for(l=0,m=e.skips.length;l<m;l++)if(e.skips[l].test(f))return!1;for(l=0,m=e.names.length;l<m;l++)if(e.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}Rc.exports=r1});var $c=nt((dt,yn)=>{dt.formatArgs=i1;dt.save=o1;dt.load=s1;dt.useColors=n1;dt.storage=a1();dt.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();dt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n1(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i1(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+yn.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;r.splice(1,0,t,"color: inherit");let e=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(e++,i==="%c"&&(n=e))}),r.splice(n,0,t)}dt.log=console.debug||console.log||(()=>{});function o1(r){try{r?dt.storage.setItem("debug",r):dt.storage.removeItem("debug")}catch{}}function s1(){let r;try{r=dt.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function a1(){try{return localStorage}catch{}}yn.exports=Oc()(dt);var{formatters:c1}=yn.exports;c1.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var X1={};K(X1,{mfs:()=>q1});var Ai=P(q(),1);function du(r){return r[Symbol.asyncIterator]!=null}function pu(r){if(du(r))return(async()=>{for await(let t of r)return t})();for(let t of r)return t}var Tn=pu;function mu(r){return r[Symbol.asyncIterator]!=null}function yu(r,t=1){return t=Number(t),mu(r)?async function*(){let e=[];if(t<1&&(t=1),t!==Math.round(t))throw new Error("Batch size must be an integer");for await(let n of r)for(e.push(n);e.length>=t;)yield e.slice(0,t),e=e.slice(t);for(;e.length>0;)yield e.slice(0,t),e=e.slice(t)}():function*(){let e=[];if(t<1&&(t=1),t!==Math.round(t))throw new Error("Batch size must be an integer");for(let n of r)for(e.push(n);e.length>=t;)yield e.slice(0,t),e=e.slice(t);for(;e.length>0;)yield e.slice(0,t),e=e.slice(t)}()}var je=yu;async function*Ge(r,t=1){for await(let e of je(r,t)){let n=e.map(async i=>i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}function Mt(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Ut(r=0){return globalThis.Buffer?.alloc!=null?Mt(globalThis.Buffer.alloc(r)):new Uint8Array(r)}function ot(r=0){return globalThis.Buffer?.allocUnsafe!=null?Mt(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Zt(r,t){if(globalThis.Buffer!=null)return Mt(globalThis.Buffer.concat(r,t));t==null&&(t=r.reduce((i,o)=>i+o.length,0));let e=ot(t),n=0;for(let i of r)e.set(i,n),n+=i.length;return Mt(e)}function oo(r,t){if(r===t)return!0;if(r.byteLength!==t.byteLength)return!1;for(let e=0;e<r.byteLength;e++)if(r[e]!==t[e])return!1;return!0}var ao=Symbol.for("@achingbrain/uint8arraylist");function so(r,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let e=0;for(let n of r){let i=e+n.byteLength;if(t<i)return{buf:n,index:t-e};e=i}throw new RangeError("index is out of bounds")}function Tr(r){return!!r?.[ao]}var Qt=class r{bufs;length;[ao]=!0;constructor(...t){this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let e=0;for(let n of t)if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.push(n);else if(Tr(n))e+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=e}prepend(...t){this.prependAll(t)}prependAll(t){let e=0;for(let n of t.reverse())if(n instanceof Uint8Array)e+=n.byteLength,this.bufs.unshift(n);else if(Tr(n))e+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=e}get(t){let e=so(this.bufs,t);return e.buf[e.index]}set(t,e){let n=so(this.bufs,t);n.buf[n.index]=e}write(t,e=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(e+n,t[n]);else if(Tr(t))for(let n=0;n<t.length;n++)this.set(e+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,e){let{bufs:n,length:i}=this._subList(t,e);return Zt(n,i)}subarray(t,e){let{bufs:n,length:i}=this._subList(t,e);return n.length===1?n[0]:Zt(n,i)}sublist(t,e){let{bufs:n,length:i}=this._subList(t,e),o=new r;return o.length=i,o.bufs=[...n],o}_subList(t,e){if(t=t??0,e=e??this.length,t<0&&(t=this.length+t),e<0&&(e=this.length+e),t<0||e>this.length)throw new RangeError("index is out of bounds");if(t===e)return{bufs:[],length:0};if(t===0&&e===this.length)return{bufs:this.bufs,length:this.length};let n=[],i=0;for(let o=0;o<this.bufs.length;o++){let s=this.bufs[o],a=i,c=a+s.byteLength;if(i=c,t>=c)continue;let h=t>=a&&t<c,f=e>a&&e<=c;if(h&&f){if(t===a&&e===c){n.push(s);break}let l=t-a;n.push(s.subarray(l,l+(e-t)));break}if(h){if(t===0){n.push(s);continue}n.push(s.subarray(t-a));continue}if(f){if(e===c){n.push(s);break}n.push(s.subarray(0,e-a));break}n.push(s)}return{bufs:n,length:e-t}}indexOf(t,e=0){if(!Tr(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(e=Number(e??0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let o=256,s=new Int32Array(o);for(let l=0;l<o;l++)s[l]=-1;for(let l=0;l<i;l++)s[n[l]]=l;let a=s,c=this.byteLength-n.byteLength,h=n.byteLength-1,f;for(let l=e;l<=c;l+=f){f=0;for(let m=h;m>=0;m--){let u=this.get(l+m);if(n[m]!==u){f=Math.max(1,m-a[u]);break}}if(f===0)return l}return-1}getInt8(t){let e=this.subarray(t,t+1);return new DataView(e.buffer,e.byteOffset,e.byteLength).getInt8(0)}setInt8(t,e){let n=ot(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,e),this.write(n,t)}getInt16(t,e){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,e)}setInt16(t,e,n){let i=Ut(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,e,n),this.write(i,t)}getInt32(t,e){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,e)}setInt32(t,e,n){let i=Ut(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,e,n),this.write(i,t)}getBigInt64(t,e){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,e)}setBigInt64(t,e,n){let i=Ut(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,e,n),this.write(i,t)}getUint8(t){let e=this.subarray(t,t+1);return new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0)}setUint8(t,e){let n=ot(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,e),this.write(n,t)}getUint16(t,e){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,e)}setUint16(t,e,n){let i=Ut(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,e,n),this.write(i,t)}getUint32(t,e){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,e)}setUint32(t,e,n){let i=Ut(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,e,n),this.write(i,t)}getBigUint64(t,e){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,e)}setBigUint64(t,e,n){let i=Ut(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,e,n),this.write(i,t)}getFloat32(t,e){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,e)}setFloat32(t,e,n){let i=Ut(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,e,n),this.write(i,t)}getFloat64(t,e){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,e)}setFloat64(t,e,n){let i=Ut(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,e,n),this.write(i,t)}equals(t){if(t==null||!(t instanceof r)||t.bufs.length!==this.bufs.length)return!1;for(let e=0;e<this.bufs.length;e++)if(!oo(this.bufs[e],t.bufs[e]))return!1;return!0}static fromUint8Arrays(t,e){let n=new r;return n.bufs=t,e==null&&(e=t.reduce((i,o)=>i+o.byteLength,0)),n.length=e,n}};var gu=262144,We=(r={})=>{let t=r.chunkSize??gu;return async function*(n){let i=new Qt,o=0,s=!1;for await(let a of n)for(i.append(a),o+=a.length;o>=t;)if(yield i.slice(0,t),s=!0,t===i.length)i=new Qt,o=0;else{let c=new Qt;c.append(i.sublist(t)),i=c,o-=t}(!s||o>0)&&(yield i.subarray(0,o))}};var M={};K(M,{code:()=>G,createLink:()=>vo,createNode:()=>Io,decode:()=>V,encode:()=>F,name:()=>mf,prepare:()=>R,validate:()=>Hn});var zn={};K(zn,{base32:()=>jt,base32hex:()=>Tu,base32hexpad:()=>Cu,base32hexpadupper:()=>Du,base32hexupper:()=>Nu,base32pad:()=>Iu,base32padupper:()=>vu,base32upper:()=>Bu,base32z:()=>Fu});var de={};K(de,{coerce:()=>yt,empty:()=>co,equals:()=>Nn,fromHex:()=>xu,fromString:()=>Cn,isBinary:()=>bu,toHex:()=>wu,toString:()=>Dn});var co=new Uint8Array(0);function wu(r){return r.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}function xu(r){let t=r.match(/../g);return t!=null?new Uint8Array(t.map(e=>parseInt(e,16))):co}function Nn(r,t){if(r===t)return!0;if(r.byteLength!==t.byteLength)return!1;for(let e=0;e<r.byteLength;e++)if(r[e]!==t[e])return!1;return!0}function yt(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function bu(r){return r instanceof ArrayBuffer||ArrayBuffer.isView(r)}function Cn(r){return new TextEncoder().encode(r)}function Dn(r){return new TextDecoder().decode(r)}function _u(r,t){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(e[s]!==255)throw new TypeError(o+" is ambiguous");e[s]=i}var a=r.length,c=r.charAt(0),h=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var y=0,_=0,g=0,w=d.length;g!==w&&d[g]===0;)g++,y++;for(var b=(w-g)*f+1>>>0,E=new Uint8Array(b);g!==w;){for(var v=d[g],S=0,x=b-1;(v!==0||S<_)&&x!==-1;x--,S++)v+=256*E[x]>>>0,E[x]=v%a>>>0,v=v/a>>>0;if(v!==0)throw new Error("Non-zero carry");_=S,g++}for(var B=b-_;B!==b&&E[B]===0;)B++;for(var N=c.repeat(y);B<b;++B)N+=r.charAt(E[B]);return N}function m(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var y=0;if(d[y]!==" "){for(var _=0,g=0;d[y]===c;)_++,y++;for(var w=(d.length-y)*h+1>>>0,b=new Uint8Array(w);d[y];){var E=e[d.charCodeAt(y)];if(E===255)return;for(var v=0,S=w-1;(E!==0||v<g)&&S!==-1;S--,v++)E+=a*b[S]>>>0,b[S]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");g=v,y++}if(d[y]!==" "){for(var x=w-g;x!==w&&b[x]===0;)x++;for(var B=new Uint8Array(_+(w-x)),N=_;x!==w;)B[N++]=b[x++];return B}}}function u(d){var y=m(d);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:m,decode:u}}var Eu=_u,Au=Eu,uo=Au;var Fn=class{name;prefix;baseEncode;constructor(t,e,n){this.name=t,this.prefix=e,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Ln=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,e,n){if(this.name=t,this.prefix=e,e.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return fo(this,t)}},Un=class{decoders;constructor(t){this.decoders=t}or(t){return fo(this,t)}decode(t){let e=t[0],n=this.decoders[e];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function fo(r,t){return new Un({...r.decoders??{[r.prefix]:r},...t.decoders??{[t.prefix]:t}})}var Pn=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,e,n,i){this.name=t,this.prefix=e,this.baseEncode=n,this.baseDecode=i,this.encoder=new Fn(t,e,n),this.decoder=new Ln(t,e,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function pe({name:r,prefix:t,encode:e,decode:n}){return new Pn(r,t,e,n)}function Ht({name:r,prefix:t,alphabet:e}){let{encode:n,decode:i}=uo(e,r);return pe({prefix:t,name:r,encode:n,decode:o=>yt(i(o))})}function Su(r,t,e,n){let i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*e/8|0),a=0,c=0,h=0;for(let f=0;f<o;++f){let l=i[r[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<e|l,a+=e,a>=8&&(a-=8,s[h++]=255&c>>a)}if(a>=e||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s}function ku(r,t,e){let n=t[t.length-1]==="=",i=(1<<e)-1,o="",s=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],s+=8;s>e;)s-=e,o+=t[i&a>>s];if(s!==0&&(o+=t[i&a<<e-s]),n)for(;o.length*e&7;)o+="=";return o}function z({name:r,prefix:t,bitsPerChar:e,alphabet:n}){return pe({prefix:t,name:r,encode(i){return ku(i,n,e)},decode(i){return Su(i,n,e,r)}})}var jt=z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Bu=z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Iu=z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vu=z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Tu=z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Nu=z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Cu=z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Du=z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Fu=z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Rn={};K(Rn,{base58btc:()=>gt,base58flickr:()=>Lu});var gt=Ht({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Lu=Ht({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Uu=po,lo=128,Pu=127,zu=~Pu,Ru=Math.pow(2,31);function po(r,t,e){t=t||[],e=e||0;for(var n=e;r>=Ru;)t[e++]=r&255|lo,r/=128;for(;r&zu;)t[e++]=r&255|lo,r>>>=7;return t[e]=r|0,po.bytes=e-n+1,t}var Ou=On,$u=128,ho=127;function On(r,n){var e=0,n=n||0,i=0,o=n,s,a=r.length;do{if(o>=a)throw On.bytes=0,new RangeError("Could not decode varint");s=r[o++],e+=i<28?(s&ho)<<i:(s&ho)*Math.pow(2,i),i+=7}while(s>=$u);return On.bytes=o-n,e}var Vu=Math.pow(2,7),Mu=Math.pow(2,14),Hu=Math.pow(2,21),ju=Math.pow(2,28),Gu=Math.pow(2,35),Wu=Math.pow(2,42),Yu=Math.pow(2,49),Ku=Math.pow(2,56),qu=Math.pow(2,63),Xu=function(r){return r<Vu?1:r<Mu?2:r<Hu?3:r<ju?4:r<Gu?5:r<Wu?6:r<Yu?7:r<Ku?8:r<qu?9:10},Ju={encode:Uu,decode:Ou,encodingLength:Xu},Zu=Ju,Ye=Zu;function Ke(r,t=0){return[Ye.decode(r,t),Ye.decode.bytes]}function me(r,t,e=0){return Ye.encode(r,t,e),t}function ye(r){return Ye.encodingLength(r)}function te(r,t){let e=t.byteLength,n=ye(r),i=n+ye(e),o=new Uint8Array(i+e);return me(r,o,0),me(e,o,n),o.set(t,i),new ge(r,e,t,o)}function Cr(r){let t=yt(r),[e,n]=Ke(t),[i,o]=Ke(t.subarray(n)),s=t.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new ge(e,i,s,t)}function mo(r,t){if(r===t)return!0;{let e=t;return r.code===e.code&&r.size===e.size&&e.bytes instanceof Uint8Array&&Nn(r.bytes,e.bytes)}}var ge=class{code;size;digest;bytes;constructor(t,e,n,i){this.code=t,this.size=e,this.digest=n,this.bytes=i}};function yo(r,t){let{bytes:e,version:n}=r;switch(n){case 0:return tf(e,$n(r),t??gt.encoder);default:return ef(e,$n(r),t??jt.encoder)}}var go=new WeakMap;function $n(r){let t=go.get(r);if(t==null){let e=new Map;return go.set(r,e),e}return t}var C=class r{code;version;multihash;bytes;"/";constructor(t,e,n,i){this.code=e,this.version=t,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:e}=this;if(t!==qe)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==rf)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(e)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:e}=this.multihash,n=te(t,e);return r.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return r.equals(this,t)}static equals(t,e){let n=e;return n!=null&&t.code===n.code&&t.version===n.version&&mo(t.multihash,n.multihash)}toString(t){return yo(this,t)}toJSON(){return{"/":yo(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let e=t;if(e instanceof r)return e;if(e["/"]!=null&&e["/"]===e.bytes||e.asCID===e){let{version:n,code:i,multihash:o,bytes:s}=e;return new r(n,i,o,s??wo(n,i,o.bytes))}else if(e[nf]===!0){let{version:n,multihash:i,code:o}=e,s=Cr(i);return r.create(n,o,s)}else return null}static create(t,e,n){if(typeof e!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(e!==qe)throw new Error(`Version 0 CID must use dag-pb (code: ${qe}) block encoding`);return new r(t,e,n,n.bytes)}case 1:{let i=wo(t,e,n.bytes);return new r(t,e,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return r.create(0,qe,t)}static createV1(t,e){return r.create(1,t,e)}static decode(t){let[e,n]=r.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return e}static decodeFirst(t){let e=r.inspectBytes(t),n=e.size-e.multihashSize,i=yt(t.subarray(n,n+e.multihashSize));if(i.byteLength!==e.multihashSize)throw new Error("Incorrect length");let o=i.subarray(e.multihashSize-e.digestSize),s=new ge(e.multihashCode,e.digestSize,o,i);return[e.version===0?r.createV0(s):r.createV1(e.codec,s),t.subarray(e.size)]}static inspectBytes(t){let e=0,n=()=>{let[l,m]=Ke(t.subarray(e));return e+=m,l},i=n(),o=qe;if(i===18?(i=0,e=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=e,a=n(),c=n(),h=e+c,f=h-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:f,size:h}}static parse(t,e){let[n,i]=Qu(t,e),o=r.decode(i);if(o.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return $n(o).set(n,t),o}};function Qu(r,t){switch(r[0]){case"Q":{let e=t??gt;return[gt.prefix,e.decode(`${gt.prefix}${r}`)]}case gt.prefix:{let e=t??gt;return[gt.prefix,e.decode(r)]}case jt.prefix:{let e=t??jt;return[jt.prefix,e.decode(r)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],t.decode(r)]}}}function tf(r,t,e){let{prefix:n}=e;if(n!==gt.prefix)throw Error(`Cannot string encode V0 in ${e.name} encoding`);let i=t.get(n);if(i==null){let o=e.encode(r).slice(1);return t.set(n,o),o}else return i}function ef(r,t,e){let{prefix:n}=e,i=t.get(n);if(i==null){let o=e.encode(r);return t.set(n,o),o}else return i}var qe=112,rf=18;function wo(r,t,e){let n=ye(r),i=n+ye(t),o=new Uint8Array(i+e.byteLength);return me(r,o,0),me(t,o,n),o.set(e,i),o}var nf=Symbol.for("@ipld/js-cid/CID");var of=new TextDecoder;function Vn(r,t){let e=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[t++];if(e+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[e,t]}function Dr(r,t){let e;[e,t]=Vn(r,t);let n=t+e;if(e<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(t,n),n]}function xo(r,t){let e;return[e,t]=Vn(r,t),[e&7,e>>3,t]}function sf(r){let t={},e=r.length,n=0;for(;n<e;){let i,o;if([i,o,n]=xo(r,n),o===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=Dr(r,n)}else if(o===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=Dr(r,n),t.Name=of.decode(s)}else if(o===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[t.Tsize,n]=Vn(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>e)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function bo(r){let t=r.length,e=0,n,i=!1,o;for(;e<t;){let a,c;if([a,c,e]=xo(r,e),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,e]=Dr(r,e),n&&(i=!0)}else if(c===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let h;[h,e]=Dr(r,e),n.push(sf(h))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(e>t)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}var Eo=new TextEncoder,_o=2**32,af=2**31;function cf(r,t){let e=t.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");e=Xe(t,e,r.Tsize)-1,t[e]=24}if(typeof r.Name=="string"){let n=Eo.encode(r.Name);e-=n.length,t.set(n,e),e=Xe(t,e,n.length)-1,t[e]=18}return r.Hash&&(e-=r.Hash.length,t.set(r.Hash,e),e=Xe(t,e,r.Hash.length)-1,t[e]=10),t.length-e}function Ao(r){let t=ff(r),e=new Uint8Array(t),n=t;if(r.Data&&(n-=r.Data.length,e.set(r.Data,n),n=Xe(e,n,r.Data.length)-1,e[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=cf(r.Links[i],e.subarray(0,n));n-=o,n=Xe(e,n,o)-1,e[n]=18}return e}function uf(r){let t=0;if(r.Hash){let e=r.Hash.length;t+=1+e+xe(e)}if(typeof r.Name=="string"){let e=Eo.encode(r.Name).length;t+=1+e+xe(e)}return typeof r.Tsize=="number"&&(t+=1+xe(r.Tsize)),t}function ff(r){let t=0;if(r.Data){let e=r.Data.length;t+=1+e+xe(e)}if(r.Links)for(let e of r.Links){let n=uf(e);t+=1+n+xe(n)}return t}function Xe(r,t,e){t-=xe(e);let n=t;for(;e>=af;)r[t++]=e&127|128,e/=128;for(;e>=128;)r[t++]=e&127|128,e>>>=7;return r[t]=e,n}function xe(r){return r%2===0&&r++,Math.floor((lf(r)+6)/7)}function lf(r){let t=0;return r>=_o&&(r=Math.floor(r/_o),t=32),r>=65536&&(r>>>=16,t+=16),r>=256&&(r>>>=8,t+=8),t+hf[r]}var hf=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var df=["Data","Links"],pf=["Hash","Name","Tsize"],Mn=new TextEncoder;function ko(r,t){if(r===t)return 0;let e=r.Name?Mn.encode(r.Name):[],n=t.Name?Mn.encode(t.Name):[],i=e.length,o=n.length;for(let s=0,a=Math.min(i,o);s<a;++s)if(e[s]!==n[s]){i=e[s],o=n[s];break}return i<o?-1:o<i?1:0}function So(r,t){return!Object.keys(r).some(e=>!t.includes(e))}function Bo(r){if(typeof r.asCID=="object"){let e=C.asCID(r);if(!e)throw new TypeError("Invalid DAG-PB form");return{Hash:e}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let t={};if(r.Hash){let e=C.asCID(r.Hash);try{e||(typeof r.Hash=="string"?e=C.parse(r.Hash):r.Hash instanceof Uint8Array&&(e=C.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}e&&(t.Hash=e)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(t.Name=r.Name),typeof r.Tsize=="number"&&(t.Tsize=r.Tsize),t}function R(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let t={};if(r.Data!==void 0)if(typeof r.Data=="string")t.Data=Mn.encode(r.Data);else if(r.Data instanceof Uint8Array)t.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))t.Links=r.Links.map(Bo),t.Links.sort(ko);else throw new TypeError("Invalid DAG-PB form");else t.Links=[];return t}function Hn(r){if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form");if(!So(r,df))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<r.Links.length;t++){let e=r.Links[t];if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!So(e,pf))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(e.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(e.Hash==null||!e.Hash["/"]||e.Hash["/"]!==e.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(e.Name!==void 0&&typeof e.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(e.Tsize!==void 0){if(typeof e.Tsize!="number"||e.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&ko(e,r.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Io(r,t=[]){return R({Data:r,Links:t})}function vo(r,t,e){return Bo({Hash:e,Name:r,Tsize:t})}function To(r){return r instanceof ArrayBuffer?new Uint8Array(r,0,r.byteLength):r}var mf="dag-pb",G=112;function F(r){Hn(r);let t={};return r.Links&&(t.Links=r.Links.map(e=>{let n={};return e.Hash&&(n.Hash=e.Hash.bytes),e.Name!==void 0&&(n.Name=e.Name),e.Tsize!==void 0&&(n.Tsize=e.Tsize),n})),r.Data&&(t.Data=r.Data),Ao(t)}function V(r){let t=To(r),e=bo(t),n={};return e.Data&&(n.Data=e.Data),e.Links&&(n.Links=e.Links.map(i=>{let o={};try{o.Hash=C.decode(i.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(o.Name=i.Name),i.Tsize!==void 0&&(o.Tsize=i.Tsize),o})),n}var gi=P(q(),1);var yf=Math.pow(2,7),gf=Math.pow(2,14),wf=Math.pow(2,21),No=Math.pow(2,28),Co=Math.pow(2,35),Do=Math.pow(2,42),Fo=Math.pow(2,49),Q=128,Gt=127;function Je(r){if(r<yf)return 1;if(r<gf)return 2;if(r<wf)return 3;if(r<No)return 4;if(r<Co)return 5;if(r<Do)return 6;if(r<Fo)return 7;if(Number.MAX_SAFE_INTEGER!=null&&r>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Lo(r,t,e=0){switch(Je(r)){case 8:t[e++]=r&255|Q,r/=128;case 7:t[e++]=r&255|Q,r/=128;case 6:t[e++]=r&255|Q,r/=128;case 5:t[e++]=r&255|Q,r/=128;case 4:t[e++]=r&255|Q,r>>>=7;case 3:t[e++]=r&255|Q,r>>>=7;case 2:t[e++]=r&255|Q,r>>>=7;case 1:{t[e++]=r&255,r>>>=7;break}default:throw new Error("unreachable")}return t}function Uo(r,t){let e=r[t],n=0;if(n+=e&Gt,e<Q||(e=r[t+1],n+=(e&Gt)<<7,e<Q)||(e=r[t+2],n+=(e&Gt)<<14,e<Q)||(e=r[t+3],n+=(e&Gt)<<21,e<Q)||(e=r[t+4],n+=(e&Gt)*No,e<Q)||(e=r[t+5],n+=(e&Gt)*Co,e<Q)||(e=r[t+6],n+=(e&Gt)*Do,e<Q)||(e=r[t+7],n+=(e&Gt)*Fo,e<Q))return n;throw new RangeError("Could not decode varint")}var jn=new Float32Array([-0]),Wt=new Uint8Array(jn.buffer);function Po(r,t,e){jn[0]=r,t[e]=Wt[0],t[e+1]=Wt[1],t[e+2]=Wt[2],t[e+3]=Wt[3]}function zo(r,t){return Wt[0]=r[t],Wt[1]=r[t+1],Wt[2]=r[t+2],Wt[3]=r[t+3],jn[0]}var Gn=new Float64Array([-0]),X=new Uint8Array(Gn.buffer);function Ro(r,t,e){Gn[0]=r,t[e]=X[0],t[e+1]=X[1],t[e+2]=X[2],t[e+3]=X[3],t[e+4]=X[4],t[e+5]=X[5],t[e+6]=X[6],t[e+7]=X[7]}function Oo(r,t){return X[0]=r[t],X[1]=r[t+1],X[2]=r[t+2],X[3]=r[t+3],X[4]=r[t+4],X[5]=r[t+5],X[6]=r[t+6],X[7]=r[t+7],Gn[0]}var xf=BigInt(Number.MAX_SAFE_INTEGER),bf=BigInt(Number.MIN_SAFE_INTEGER),st=class r{lo;hi;constructor(t,e){this.lo=t|0,this.hi=e|0}toNumber(t=!1){if(!t&&this.hi>>>31>0){let e=~this.lo+1>>>0,n=~this.hi>>>0;return e===0&&(n=n+1>>>0),-(e+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let e=~this.lo+1>>>0,n=~this.hi>>>0;return e===0&&(n=n+1>>>0),-(BigInt(e)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){let t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){let t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){let t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?e===0?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}static fromBigInt(t){if(t===0n)return ee;if(t<xf&&t>bf)return this.fromNumber(Number(t));let e=t<0n;e&&(t=-t);let n=t>>32n,i=t-(n<<32n);return e&&(n=~n|0n,i=~i|0n,++i>$o&&(i=0n,++n>$o&&(n=0n))),new r(Number(i),Number(n))}static fromNumber(t){if(t===0)return ee;let e=t<0;e&&(t=-t);let n=t>>>0,i=(t-n)/4294967296>>>0;return e&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)}static from(t){return typeof t=="number"?r.fromNumber(t):typeof t=="bigint"?r.fromBigInt(t):typeof t=="string"?r.fromBigInt(BigInt(t)):t.low!=null||t.high!=null?new r(t.low>>>0,t.high>>>0):ee}},ee=new st(0,0);ee.toBigInt=function(){return 0n};ee.zzEncode=ee.zzDecode=function(){return this};ee.length=function(){return 1};var $o=4294967296n;function Vo(r){let t=0,e=0;for(let n=0;n<r.length;++n)e=r.charCodeAt(n),e<128?t+=1:e<2048?t+=2:(e&64512)===55296&&(r.charCodeAt(n+1)&64512)===56320?(++n,t+=4):t+=3;return t}function Mo(r,t,e){if(e-t<1)return"";let i,o=[],s=0,a;for(;t<e;)a=r[t++],a<128?o[s++]=a:a>191&&a<224?o[s++]=(a&31)<<6|r[t++]&63:a>239&&a<365?(a=((a&7)<<18|(r[t++]&63)<<12|(r[t++]&63)<<6|r[t++]&63)-65536,o[s++]=55296+(a>>10),o[s++]=56320+(a&1023)):o[s++]=(a&15)<<12|(r[t++]&63)<<6|r[t++]&63,s>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i!=null?(s>0&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))}function Wn(r,t,e){let n=e,i,o;for(let s=0;s<r.length;++s)i=r.charCodeAt(s),i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&((o=r.charCodeAt(s+1))&64512)===56320?(i=65536+((i&1023)<<10)+(o&1023),++s,t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128);return e-n}function _t(r,t){return RangeError(`index out of range: ${r.pos} + ${t??1} > ${r.len}`)}function Fr(r,t){return(r[t-4]|r[t-3]<<8|r[t-2]<<16|r[t-1]<<24)>>>0}var Yn=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(t){this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,_t(this,10);return t}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw _t(this,4);return Fr(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw _t(this,4);return Fr(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw _t(this,4);let t=zo(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw _t(this,4);let t=Oo(this.buf,this.pos);return this.pos+=8,t}bytes(){let t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw _t(this,t);return this.pos+=t,e===n?new Uint8Array(0):this.buf.subarray(e,n)}string(){let t=this.bytes();return Mo(t,0,t.length)}skip(t){if(typeof t=="number"){if(this.pos+t>this.len)throw _t(this,t);this.pos+=t}else do if(this.pos>=this.len)throw _t(this);while(this.buf[this.pos++]&128);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){let t=new st(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw _t(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw _t(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw _t(this,8);let t=Fr(this.buf,this.pos+=4),e=Fr(this.buf,this.pos+=4);return new st(t,e)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let t=Uo(this.buf,this.pos);return this.pos+=Je(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function Kn(r){return new Yn(r instanceof Uint8Array?r:r.subarray())}function Ze(r,t,e){let n=Kn(r);return t.decode(n,void 0,e)}var qn={};K(qn,{base10:()=>_f});var _f=Ht({prefix:"9",name:"base10",alphabet:"0123456789"});var Xn={};K(Xn,{base16:()=>Ef,base16upper:()=>Af});var Ef=z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Af=z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Jn={};K(Jn,{base2:()=>Sf});var Sf=z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Zn={};K(Zn,{base256emoji:()=>Tf});var jo=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),kf=jo.reduce((r,t,e)=>(r[e]=t,r),[]),Bf=jo.reduce((r,t,e)=>(r[t.codePointAt(0)]=e,r),[]);function If(r){return r.reduce((t,e)=>(t+=kf[e],t),"")}function vf(r){let t=[];for(let e of r){let n=Bf[e.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${e}`);t.push(n)}return new Uint8Array(t)}var Tf=pe({prefix:"\u{1F680}",name:"base256emoji",encode:If,decode:vf});var Qn={};K(Qn,{base36:()=>Nf,base36upper:()=>Cf});var Nf=Ht({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Cf=Ht({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ti={};K(ti,{base64:()=>Qe,base64pad:()=>Df,base64url:()=>Ff,base64urlpad:()=>Lf});var Qe=z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Df=z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ff=z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Lf=z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ei={};K(ei,{base8:()=>Uf});var Uf=z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ri={};K(ri,{identity:()=>Pf});var Pf=pe({prefix:"\0",name:"identity",encode:r=>Dn(r),decode:r=>Cn(r)});var n0=new TextEncoder,zf=new TextDecoder;var Go=512;function Wo(r){return JSON.parse(zf.decode(r))}var vt={};K(vt,{code:()=>it,decode:()=>$f,encode:()=>Of,name:()=>Rf});var Rf="raw",it=85;function Of(r){return yt(r)}function $f(r){return yt(r)}var oi={};K(oi,{identity:()=>ii});var Yo=0,Vf="identity",Ko=yt;function Mf(r){return te(Yo,Ko(r))}var ii={code:Yo,name:Vf,encode:Ko,digest:Mf};var ai={};K(ai,{sha256:()=>at,sha512:()=>Hf});function re({name:r,code:t,encode:e}){return new si(r,t,e)}var si=class{name;code;encode;constructor(t,e,n){this.name=t,this.code=e,this.encode=n}digest(t){if(t instanceof Uint8Array){let e=this.encode(t);return e instanceof Uint8Array?te(this.code,e):e.then(n=>te(this.code,n))}else throw Error("Unknown type, must be binary type")}};function Xo(r){return async t=>new Uint8Array(await crypto.subtle.digest(r,t))}var at=re({name:"sha2-256",code:18,encode:Xo("SHA-256")}),Hf=re({name:"sha2-512",code:19,encode:Xo("SHA-512")});var ci={...ri,...Jn,...ei,...qn,...Xn,...zn,...Qn,...Rn,...ti,...Zn},y0={...ai,...oi};function Zo(r,t,e,n){return{name:r,prefix:t,encoder:{name:r,prefix:t,encode:e},decoder:{decode:n}}}var Jo=Zo("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ui=Zo("ascii","a",r=>{let t="a";for(let e=0;e<r.length;e++)t+=String.fromCharCode(r[e]);return t},r=>{r=r.substring(1);let t=ot(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return t}),jf={utf8:Jo,"utf-8":Jo,hex:ci.base16,latin1:ui,ascii:ui,binary:ui,...ci},Lr=jf;function wt(r,t="utf8"){let e=Lr[t];if(e==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Mt(globalThis.Buffer.from(r,"utf-8")):e.decoder.decode(`${e.prefix}${r}`)}function fi(r){let t=r??8192,e=t>>>1,n,i=t;return function(s){if(s<1||s>e)return ot(s);i+s>t&&(n=ot(t),i=0);let a=n.subarray(i,i+=s);return i&7&&(i=(i|7)+1),a}}var ne=class{fn;len;next;val;constructor(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}};function li(){}var di=class{head;tail;len;next;constructor(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}},Gf=fi();function Wf(r){return globalThis.Buffer!=null?ot(r):Gf(r)}var er=class{len;head;tail;states;constructor(){this.len=0,this.head=new ne(li,0,0),this.tail=this.head,this.states=null}_push(t,e,n){return this.tail=this.tail.next=new ne(t,e,n),this.len+=e,this}uint32(t){return this.len+=(this.tail=this.tail.next=new pi((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(Ur,10,st.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){let e=st.fromBigInt(t);return this._push(Ur,e.length(),e)}uint64Number(t){return this._push(Lo,Je(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){let e=st.fromBigInt(t).zzEncode();return this._push(Ur,e.length(),e)}sint64Number(t){let e=st.fromNumber(t).zzEncode();return this._push(Ur,e.length(),e)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(hi,1,t?1:0)}fixed32(t){return this._push(tr,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){let e=st.fromBigInt(t);return this._push(tr,4,e.lo)._push(tr,4,e.hi)}fixed64Number(t){let e=st.fromNumber(t);return this._push(tr,4,e.lo)._push(tr,4,e.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(Po,4,t)}double(t){return this._push(Ro,8,t)}bytes(t){let e=t.length>>>0;return e===0?this._push(hi,1,0):this.uint32(e)._push(Kf,e,t)}string(t){let e=Vo(t);return e!==0?this.uint32(e)._push(Wn,e,t):this._push(hi,1,0)}fork(){return this.states=new di(this),this.head=this.tail=new ne(li,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ne(li,0,0),this.len=0),this}ldelim(){let t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=t.next,this.tail=e,this.len+=n),this}finish(){let t=this.head.next,e=Wf(this.len),n=0;for(;t!=null;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e}};function hi(r,t,e){t[e]=r&255}function Yf(r,t,e){for(;r>127;)t[e++]=r&127|128,r>>>=7;t[e]=r}var pi=class extends ne{next;constructor(t,e){super(Yf,t,e),this.next=void 0}};function Ur(r,t,e){for(;r.hi!==0;)t[e++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)t[e++]=r.lo&127|128,r.lo=r.lo>>>7;t[e++]=r.lo}function tr(r,t,e){t[e]=r&255,t[e+1]=r>>>8&255,t[e+2]=r>>>16&255,t[e+3]=r>>>24}function Kf(r,t,e){t.set(r,e)}globalThis.Buffer!=null&&(er.prototype.bytes=function(r){let t=r.length>>>0;return this.uint32(t),t>0&&this._push(qf,t,r),this},er.prototype.string=function(r){let t=globalThis.Buffer.byteLength(r);return this.uint32(t),t>0&&this._push(Xf,t,r),this});function qf(r,t,e){t.set(r,e)}function Xf(r,t,e){r.length<40?Wn(r,t,e):t.utf8Write!=null?t.utf8Write(r,e):t.set(wt(r),e)}function mi(){return new er}function rr(r,t){let e=mi();return t.encode(r,e,{lengthDelimited:!1}),e.finish()}var be;(function(r){r[r.VARINT=0]="VARINT",r[r.BIT64=1]="BIT64",r[r.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",r[r.START_GROUP=3]="START_GROUP",r[r.END_GROUP=4]="END_GROUP",r[r.BIT32=5]="BIT32"})(be||(be={}));function Pr(r,t,e,n){return{name:r,type:t,encode:e,decode:n}}function yi(r){function t(i){if(r[i.toString()]==null)throw new Error("Invalid enum value");return r[i]}let e=function(o,s){let a=t(o);s.int32(a)},n=function(o){let s=o.int32();return t(s)};return Pr("enum",be.VARINT,e,n)}function nr(r,t){return Pr("message",be.LENGTH_DELIMITED,r,t)}var Et;(function(r){let t;(function(i){i.Raw="Raw",i.Directory="Directory",i.File="File",i.Metadata="Metadata",i.Symlink="Symlink",i.HAMTShard="HAMTShard"})(t=r.DataType||(r.DataType={}));let e;(function(i){i[i.Raw=0]="Raw",i[i.Directory=1]="Directory",i[i.File=2]="File",i[i.Metadata=3]="Metadata",i[i.Symlink=4]="Symlink",i[i.HAMTShard=5]="HAMTShard"})(e||(e={})),function(i){i.codec=()=>yi(e)}(t=r.DataType||(r.DataType={}));let n;r.codec=()=>(n==null&&(n=nr((i,o,s={})=>{if(s.lengthDelimited!==!1&&o.fork(),i.Type!=null&&(o.uint32(8),r.DataType.codec().encode(i.Type,o)),i.Data!=null&&(o.uint32(18),o.bytes(i.Data)),i.filesize!=null&&(o.uint32(24),o.uint64(i.filesize)),i.blocksizes!=null)for(let a of i.blocksizes)o.uint32(32),o.uint64(a);i.hashType!=null&&(o.uint32(40),o.uint64(i.hashType)),i.fanout!=null&&(o.uint32(48),o.uint64(i.fanout)),i.mode!=null&&(o.uint32(56),o.uint32(i.mode)),i.mtime!=null&&(o.uint32(66),zr.codec().encode(i.mtime,o)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={blocksizes:[]},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:s.Type=r.DataType.codec().decode(i);break;case 2:s.Data=i.bytes();break;case 3:s.filesize=i.uint64();break;case 4:s.blocksizes.push(i.uint64());break;case 5:s.hashType=i.uint64();break;case 6:s.fanout=i.uint64();break;case 7:s.mode=i.uint32();break;case 8:s.mtime=zr.codec().decode(i,i.uint32());break;default:i.skipType(c&7);break}}return s})),n),r.encode=i=>rr(i,r.codec()),r.decode=i=>Ze(i,r.codec())})(Et||(Et={}));var zr;(function(r){let t;r.codec=()=>(t==null&&(t=nr((e,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),e.Seconds!=null&&(n.uint32(8),n.int64(e.Seconds)),e.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(e.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(e,n)=>{let i={},o=n==null?e.len:e.pos+n;for(;e.pos<o;){let s=e.uint32();switch(s>>>3){case 1:i.Seconds=e.int64();break;case 2:i.FractionalNanoseconds=e.fixed32();break;default:e.skipType(s&7);break}}return i})),t),r.encode=e=>rr(e,r.codec()),r.decode=e=>Ze(e,r.codec())})(zr||(zr={}));var Qo;(function(r){let t;r.codec=()=>(t==null&&(t=nr((e,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),e.MimeType!=null&&(n.uint32(10),n.string(e.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(e,n)=>{let i={},o=n==null?e.len:e.pos+n;for(;e.pos<o;){let s=e.uint32();switch(s>>>3){case 1:i.MimeType=e.string();break;default:e.skipType(s&7);break}}return i})),t),r.encode=e=>rr(e,r.codec()),r.decode=e=>Ze(e,r.codec())})(Qo||(Qo={}));var ts={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},Jf=["directory","hamt-sharded-directory"],es=parseInt("0644",8),rs=parseInt("0755",8),T=class r{static unmarshal(t){let e=Et.decode(t),n=new r({type:ts[e.Type!=null?e.Type.toString():"File"],data:e.Data,blockSizes:e.blocksizes,mode:e.mode,mtime:e.mtime!=null?{secs:e.mtime.Seconds??0n,nsecs:e.mtime.FractionalNanoseconds}:void 0,fanout:e.fanout});return n._originalMode=e.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(t={type:"file"}){let{type:e,data:n,blockSizes:i,hashType:o,fanout:s,mtime:a,mode:c}=t;if(e!=null&&!Object.values(ts).includes(e))throw(0,gi.default)(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE");this.type=e??"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=i??[],this._originalMode=0,this.mode=c,this.mtime=a}set mode(t){t==null?this._mode=this.isDirectory()?rs:es:this._mode=t&4095}get mode(){return this._mode}isDirectory(){return Jf.includes(this.type)}addBlockSize(t){this.blockSizes.push(t)}removeBlockSize(t){this.blockSizes.splice(t,1)}fileSize(){if(this.isDirectory())return 0n;let t=0n;return this.blockSizes.forEach(e=>{t+=e}),this.data!=null&&(t+=BigInt(this.data.length)),t}marshal(){let t;switch(this.type){case"raw":t=Et.DataType.Raw;break;case"directory":t=Et.DataType.Directory;break;case"file":t=Et.DataType.File;break;case"metadata":t=Et.DataType.Metadata;break;case"symlink":t=Et.DataType.Symlink;break;case"hamt-sharded-directory":t=Et.DataType.HAMTShard;break;default:throw(0,gi.default)(new Error(`Type: ${t} is not valid`),"ERR_INVALID_TYPE")}let e=this.data;(this.data==null||this.data.length===0)&&(e=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===es&&!this.isDirectory()&&(n=void 0),n===rs&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),Et.encode({Type:t,Data:e,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}};var O=class extends Event{constructor(t,e){super(t),this.detail=e}};var At=async(r,t,e)=>{e.codec==null&&(e.codec=M);let n=await at.digest(r),i=C.create(e.cidVersion,e.codec.code,n);return await t.put(i,r,e),i};function ns(r){return async function*(e,n){let i=0n;for await(let o of e.content)yield async()=>{let s,a={codec:M,cidVersion:r.cidVersion,onProgress:r.onProgress};r.rawLeaves?(a.codec=vt,a.cidVersion=1):(s=new T({type:r.leafType,data:o}),o=F({Data:s.marshal(),Links:[]}));let c=await At(o,n,a);return i+=BigInt(o.byteLength),r.onProgress?.(new O("unixfs:importer:progress:file:write",{bytesWritten:i,cid:c,path:e.path})),{cid:c,unixfs:s,size:BigInt(o.length),block:o}}}}var wi=P(q(),1);var is=async(r,t,e)=>{let n=new T({type:"directory",mtime:r.mtime,mode:r.mode}),i=F(R({Data:n.marshal()})),o=await At(i,t,e),s=r.path;return{cid:o,path:s,unixfs:n,size:BigInt(i.length),originalPath:r.originalPath,block:i}};async function*Zf(r,t,e){let n=-1,i;for await(let o of Ge(e.bufferImporter(r,t),e.blockWriteConcurrency)){if(n++,n===0){i={...o,single:!0};continue}else n===1&&i!=null&&(yield{...i,block:void 0,single:void 0},i=void 0);yield{...o,block:void 0}}i!=null&&(yield i)}function os(r){return r.single===!0}var Qf=(r,t,e)=>async function(i){if(i.length===1&&os(i[0])&&e.reduceSingleLeafToSelf){let f=i[0],l=f.block;return os(f)&&(r.mtime!==void 0||r.mode!==void 0)&&(f.unixfs=new T({type:"file",mtime:r.mtime,mode:r.mode,data:f.block}),l={Data:f.unixfs.marshal(),Links:[]},f.block=F(R(l)),f.cid=await At(f.block,t,{...e,cidVersion:e.cidVersion}),f.size=BigInt(f.block.length)),e.onProgress?.(new O("unixfs:importer:progress:file:layout",{cid:f.cid,path:f.originalPath})),{cid:f.cid,path:r.path,unixfs:f.unixfs,size:f.size,originalPath:f.originalPath}}let o=new T({type:"file",mtime:r.mtime,mode:r.mode}),s=i.filter(f=>f.cid.code===it&&f.size>0||f.unixfs!=null&&f.unixfs.data==null&&f.unixfs.fileSize()>0n?!0:!!f.unixfs?.data?.length).map(f=>f.cid.code===it?(o.addBlockSize(f.size),{Name:"",Tsize:Number(f.size),Hash:f.cid}):(f.unixfs==null||f.unixfs.data==null?o.addBlockSize(f.unixfs?.fileSize()??0n):o.addBlockSize(BigInt(f.unixfs.data.length)),{Name:"",Tsize:Number(f.size),Hash:f.cid})),a={Data:o.marshal(),Links:s},c=F(R(a)),h=await At(c,t,e);return e.onProgress?.(new O("unixfs:importer:progress:file:layout",{cid:h,path:r.originalPath})),{cid:h,path:r.path,unixfs:o,size:BigInt(c.length+a.Links.reduce((f,l)=>f+(l.Tsize??0),0)),originalPath:r.originalPath,block:c}},ss=async(r,t,e)=>e.layout(Zf(r,t,e),Qf(r,t,e));function tl(r){return Symbol.iterator in r}function el(r){return Symbol.asyncIterator in r}function rl(r){try{if(r instanceof Uint8Array)return async function*(){yield r}();if(tl(r))return async function*(){yield*r}();if(el(r))return r}catch{throw(0,wi.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,wi.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function as(r){return async function*(e,n){for await(let i of e){let o;if(i.path!=null&&(o=i.path,i.path=i.path.split("/").filter(s=>s!=null&&s!==".").join("/")),nl(i)){let s={path:i.path,mtime:i.mtime,mode:i.mode,content:async function*(){let a=0n;for await(let c of r.chunker(r.chunkValidator(rl(i.content)))){let h=BigInt(c.byteLength);a+=h,r.onProgress?.(new O("unixfs:importer:progress:file:read",{bytesRead:a,chunkSize:h,path:i.path})),yield c}}(),originalPath:o};yield async()=>ss(s,n,r)}else if(i.path!=null){let s={path:i.path,mtime:i.mtime,mode:i.mode,originalPath:o};yield async()=>is(s,n,r)}else throw new Error("Import candidate must have content or path or both")}}}function nl(r){return r.content!=null}var xi=P(q(),1);var cs=()=>async function*(t){for await(let e of t){if(e.length===void 0)throw(0,xi.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof e=="string"||e instanceof String)yield wt(e.toString());else if(Array.isArray(e))yield Uint8Array.from(e);else if(e instanceof Uint8Array)yield e;else throw(0,xi.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}};var il=174;function ir(r){let t=r?.maxChildrenPerNode??il;return async function e(n,i){let o=[];for await(let s of je(n,t))o.push(await i(s));return o.length>1?e(o,i):o[0]}}function ol(r){return r[Symbol.asyncIterator]!=null}function sl(r){if(ol(r))return(async()=>{let e=[];for await(let n of r)e.push(n);return e})();let t=[];for(let e of r)t.push(e);return t}var bi=sl;var Tt=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(t,e){this.options=e??{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime}},or=C.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),sr=C.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");var ie=class extends Tt{_children;constructor(t,e){super(t,e),this._children=new Map}async put(t,e){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,this._children.set(t,e)}async get(t){return Promise.resolve(this._children.get(t))}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}async*eachChildSeries(){for(let[t,e]of this._children.entries())yield{key:t,child:e}}estimateNodeSize(){if(this.nodeSize!==void 0)return this.nodeSize;this.nodeSize=0;for(let[t,e]of this._children.entries())e.size!=null&&e.cid!=null&&(this.nodeSize+=t.length+(this.options.cidVersion===1?sr.bytes.byteLength:or.bytes.byteLength));return this.nodeSize}async*flush(t){let e=[];for(let[c,h]of this._children.entries()){let f=h;if(h instanceof Tt)for await(let l of h.flush(t))f=l,yield l;f.size!=null&&f.cid!=null&&e.push({Name:c,Tsize:Number(f.size),Hash:f.cid})}let n=new T({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:n.marshal(),Links:e},o=F(R(i)),s=await At(o,t,this.options),a=o.length+i.Links.reduce((c,h)=>c+(h.Tsize==null?0:h.Tsize),0);this.cid=s,this.size=a,yield{cid:s,unixfs:n,path:this.path,size:BigInt(a)}}};var Or=P(ls(),1);function al(r){let t=new Array(4);for(let e=0;e<4;e++)t[e]=r&255,r=r>>8;return new Uint8Array(t)}var jp=re({name:"murmur3-32",code:35,encode:r=>al(Or.default.x86.hash32(r))}),oe=re({name:"murmur3-128",code:34,encode:r=>de.fromHex(Or.default.x64.hash128(r))}),Gp=re({name:"murmur3-x64-64",code:34,encode:r=>de.fromHex(Or.default.x64.hash128(r)).subarray(0,8)});var ps=P($r(),1);var ct=class r{_options;_popCount;_parent;_posAtParent;_children;key;constructor(t,e,n=0){this._options=t,this._popCount=0,this._parent=e,this._posAtParent=n,this._children=new ps.default,this.key=null}async put(t,e){let n=await this._findNewBucketAndPos(t);n.bucket._putAt(n,t,e)}async get(t){let e=await this._findChild(t);if(e!=null)return e.value}async del(t){let e=await this._findPlace(t),n=e.bucket._at(e.pos);n!=null&&n.key===t&&e.bucket._delAt(e.pos)}leafCount(){return this._children.compactArray().reduce((e,n)=>n instanceof r?e+n.leafCount():e+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let t=this._children.compactArray();for(let e of t)e instanceof r?yield*e.eachLeafSeries():yield e}serialize(t,e){let n=[];return e(this._children.reduce((i,o,s)=>(o!=null&&(o instanceof r?i.push(o.serialize(t,e)):i.push(t(o,s))),i),n))}async asyncTransform(t,e){return ms(this,t,e)}toJSON(){return this.serialize(hl,dl)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(t){let e=await this._findPlace(t),n=e.bucket._at(e.pos);if(!(n instanceof r)&&n!=null&&n.key===t)return n}async _findPlace(t){let e=this._options.hash(typeof t=="string"?wt(t):t),n=await e.take(this._options.bits),i=this._children.get(n);return i instanceof r?i._findPlace(e):{bucket:this,pos:n,hash:e,existingChild:i}}async _findNewBucketAndPos(t){let e=await this._findPlace(t);if(e.existingChild!=null&&e.existingChild.key!==t){let n=new r(this._options,e.bucket,e.pos);e.bucket._putObjectAt(e.pos,n);let i=await n._findPlace(e.existingChild.hash);return i.bucket._putAt(i,e.existingChild.key,e.existingChild.value),n._findNewBucketAndPos(e.hash)}return e}_putAt(t,e,n){this._putObjectAt(t.pos,{key:e,value:n,hash:t.hash})}_putObjectAt(t,e){this._children.get(t)==null&&this._popCount++,this._children.set(t,e)}_delAt(t){if(t===-1)throw new Error("Invalid position");this._children.get(t)!=null&&this._popCount--,this._children.unset(t),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){let t=this._children.find(ll);if(t!=null&&!(t instanceof r)){let e=t.hash;e.untake(this._options.bits);let n={pos:this._posAtParent,hash:e,bucket:this._parent};this._parent._putAt(n,t.key,t.value)}}else this._parent._delAt(this._posAtParent)}_at(t){return this._children.get(t)}};function ll(r){return!!r}function hl(r,t){return r.key}function dl(r){return r}async function ms(r,t,e){let n=[];for(let i of r._children.compactArray())if(i instanceof ct)await ms(i,t,e);else{let o=await t(i);n.push({bitField:r._children.bitField(),children:o})}return e(n)}var pl=[255,254,252,248,240,224,192,128],ml=[1,3,7,15,31,63,127,255],Vr=class{_value;_currentBytePos;_currentBitPos;constructor(t){this._value=t,this._currentBytePos=t.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(t){let e=t,n=0;for(;e>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,e),a=yl(i,o-s,s);n=(n<<s)+a,e-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(t){for(this._currentBitPos+=t;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function yl(r,t,e){let n=gl(t,e);return(r&n)>>>t}function gl(r,t){return pl[r]&ml[Math.min(t+r-1,7)]}function ys(r){function t(e){return e instanceof Mr?e:new Mr(e,r)}return t}var Mr=class{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(t,e){if(!(t instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=t,this._hashFn=e,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(t){let e=t;for(;this._availableBits<e;)await this._produceMoreBits();let n=0;for(;e>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),e),s=i.take(o);n=(n<<o)+s,e-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(t){let e=t;for(;e>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),e);n.untake(i),e-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let t=this._depth>0?Zt([this._value,Uint8Array.from([this._depth])]):this._value,e=await this._hashFn(t),n=new Vr(e);this._buffers.push(n),this._availableBits+=n.availableBits()}};function _e(r){if(r==null||r.hashFn==null)throw new Error("please define an options.hashFn");let t={bits:r.bits??8,hash:ys(r.hashFn)};return new ct(t)}async function wl(r){return(await oe.encode(r)).slice(0,8).reverse()}var gs=BigInt(34),xl=8,_i=class extends Tt{_bucket;constructor(t,e){super(t,e),this._bucket=_e({hashFn:wl,bits:e.shardFanoutBits??xl})}async put(t,e){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(t,e)}async get(t){return this._bucket.get(t)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:t,value:e}of this._bucket.eachLeafSeries())yield{key:t,child:e}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=bs(this._bucket,this,this.options),this.nodeSize)}async*flush(t){for await(let e of xs(this._bucket,t,this,this.options))yield{...e,path:this.path}}},ws=_i;async function*xs(r,t,e,n){let i=r._children,o=(r.tableSize()-1).toString(16).length,s=[],a=0n;for(let d=0;d<i.length;d++){let y=i.get(d);if(y==null)continue;let _=d.toString(16).toUpperCase().padStart(o,"0");if(y instanceof ct){let g;for await(let w of xs(y,t,null,n))g=w;if(g==null)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:_,Tsize:Number(g.size),Hash:g.cid}),a+=g.size}else if(bl(y.value)){let g=y.value,w;for await(let E of g.flush(t))w=E,yield w;if(w==null)throw new Error("Did not flush dir");let b=_+y.key;s.push({Name:b,Tsize:Number(w.size),Hash:w.cid}),a+=w.size}else{let g=y.value;if(g.cid==null)continue;let w=_+y.key,b=g.size;s.push({Name:w,Tsize:Number(b),Hash:g.cid}),a+=BigInt(b??0)}}let c=Uint8Array.from(i.bitField().reverse()),h=new T({type:"hamt-sharded-directory",data:c,fanout:BigInt(r.tableSize()),hashType:gs,mtime:e?.mtime,mode:e?.mode}),f={Data:h.marshal(),Links:s},l=F(R(f)),m=await At(l,t,n),u=BigInt(l.byteLength)+a;yield{cid:m,unixfs:h,size:u}}function bl(r){return typeof r.flush=="function"}function bs(r,t,e){let n=r._children,i=(r.tableSize()-1).toString(16).length,o=[];for(let h=0;h<n.length;h++){let f=n.get(h);if(f==null)continue;let l=h.toString(16).toUpperCase().padStart(i,"0");if(f instanceof ct){let m=bs(f,null,e);o.push({Name:l,Tsize:Number(m),Hash:e.cidVersion===0?or:sr})}else if(typeof f.value.flush=="function"){let u=f.value.nodeSize();o.push({Name:l+f.key,Tsize:Number(u),Hash:e.cidVersion===0?or:sr})}else{let m=f.value;if(m.cid==null)continue;let u=l+f.key,d=m.size;o.push({Name:u,Tsize:Number(d),Hash:m.cid})}}let s=Uint8Array.from(n.bitField().reverse()),a=new T({type:"hamt-sharded-directory",data:s,fanout:BigInt(r.tableSize()),hashType:gs,mtime:t?.mtime,mode:t?.mode});return F(R({Data:a.marshal(),Links:o})).length}async function Ei(r,t,e,n){let i=t;t instanceof ie&&t.estimateNodeSize()>e&&(i=await _l(t,n));let o=i.parent;if(o!=null){if(i!==t){if(r!=null&&(r.parent=i),i.parentKey==null)throw new Error("No parent key found");await o.put(i.parentKey,i)}return Ei(i,o,e,n)}return i}async function _l(r,t){let e=new ws({root:r.root,dir:!0,parent:r.parent,parentKey:r.parentKey,path:r.path,dirty:r.dirty,flat:!1,mtime:r.mtime,mode:r.mode},t);for await(let{key:n,child:i}of r.eachChildSeries())await e.put(n,i);return e}var _s=(r="")=>r.split(/(?<!\\)\//).filter(Boolean);async function El(r,t,e){let n=_s(r.path??""),i=n.length-1,o=t,s="";for(let a=0;a<n.length;a++){let c=n[a];s+=`${s!==""?"/":""}${c}`;let h=a===i;if(o.dirty=!0,o.cid=void 0,o.size=void 0,h)await o.put(c,r),t=await Ei(null,o,e.shardSplitThresholdBytes,e);else{let f=await o.get(c);(f==null||!(f instanceof Tt))&&(f=new ie({root:!1,dir:!0,parent:o,parentKey:c,path:s,dirty:!0,flat:!0,mtime:f?.unixfs?.mtime,mode:f?.unixfs?.mode},e)),await o.put(c,f),o=f}}return t}async function*Es(r,t){if(!(r instanceof Tt)){r.unixfs?.isDirectory()===!0&&(yield r);return}yield*r.flush(t)}function As(r){return async function*(e,n){let i=new ie({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r),o,s=!1;for await(let a of e){if(a==null)continue;let c=`${a.originalPath??""}`.split("/")[0];c!=null&&c!==""&&(o==null?(o=c,s=!0):o!==c&&(s=!1)),i=await El(a,i,r),(a.unixfs==null||!a.unixfs.isDirectory())&&(yield a)}if(r.wrapWithDirectory||s&&i.childCount()>1)yield*Es(i,n);else for await(let a of i.eachChildSeries())a!=null&&(yield*Es(a.child,n))}}async function*Yt(r,t,e={}){let n;Symbol.asyncIterator in r||Symbol.iterator in r?n=r:n=[r];let i=e.wrapWithDirectory??!1,o=e.shardSplitThresholdBytes??262144,s=e.shardFanoutBits??8,a=e.cidVersion??1,c=e.rawLeaves??!0,h=e.leafType??"file",f=e.fileImportConcurrency??50,l=e.blockWriteConcurrency??10,m=e.reduceSingleLeafToSelf??!0,u=e.chunker??We(),d=e.chunkValidator??cs(),y=e.dagBuilder??as({chunker:u,chunkValidator:d,wrapWithDirectory:i,layout:e.layout??ir(),bufferImporter:e.bufferImporter??ns({cidVersion:a,rawLeaves:c,leafType:h,onProgress:e.onProgress}),blockWriteConcurrency:l,reduceSingleLeafToSelf:m,cidVersion:a,onProgress:e.onProgress}),_=e.treeBuilder??As({wrapWithDirectory:i,shardSplitThresholdBytes:o,shardFanoutBits:s,cidVersion:a,onProgress:e.onProgress});for await(let g of _(Ge(y(n,t),f),t))yield{cid:g.cid,path:g.path,unixfs:g.unixfs,size:g.size}}async function Hr(r,t,e={}){let n=await Tn(Yt([r],t,e));if(n==null)throw(0,Ai.default)(new Error("Nothing imported"),"ERR_INVALID_PARAMS");return n}async function Ss(r,t,e={}){let n=await Tn(Yt([r],t,e));if(n==null)throw(0,Ai.default)(new Error("Nothing imported"),"ERR_INVALID_PARAMS");return n}async function ks(r,t,e={}){return Hr({content:r},t,e)}async function Bs(r,t,e={}){return Hr({content:r},t,e)}var vl=P(q(),1),Tl=P(Os(),1);var lr={cidVersion:1,rawLeaves:!0,layout:ir({maxChildrenPerNode:1024}),chunker:We({chunkSize:1048576})};async function*$s(r,t,e={}){yield*Yt(r,t,{...lr,...e})}async function Vs(r,t,e={}){let{cid:n}=await ks(r,t,{...lr,...e});return n}async function Ms(r,t,e={}){let{cid:n}=await Bs(r,t,{...lr,...e});return n}async function Hs(r,t,e={}){let{cid:n}=await Hr(r,t,{...lr,...e});return n}async function js(r,t,e={}){let{cid:n}=await Ss({...r,path:r.path??"-"},t,{...lr,...e});return n}var fn=P(q(),1);function Nl(r){return r[Symbol.asyncIterator]!=null}function Cl(r){if(Nl(r))return(async()=>{let e;for await(let n of r)e=n;return e})();let t;for(let e of r)t=e;return t}var Kt=Cl;var Dl=["string","number","bigint","symbol"],Fl=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Gs(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let t=typeof r;if(Dl.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(r))return"Array";if(Ll(r))return"Buffer";let e=Ul(r);return e||"Object"}function Ll(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function Ul(r){let t=Object.prototype.toString.call(r).slice(8,-1);if(Fl.includes(t))return t}var p=class{constructor(t,e,n){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};p.uint=new p(0,"uint",!0);p.negint=new p(1,"negint",!0);p.bytes=new p(2,"bytes",!0);p.string=new p(3,"string",!0);p.array=new p(4,"array",!1);p.map=new p(5,"map",!1);p.tag=new p(6,"tag",!1);p.float=new p(7,"float",!0);p.false=new p(7,"false",!0);p.true=new p(7,"true",!0);p.null=new p(7,"null",!0);p.undefined=new p(7,"undefined",!0);p.break=new p(7,"break",!0);var A=class{constructor(t,e,n){this.type=t,this.value=e,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Ee=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Pl=new TextDecoder,zl=new TextEncoder;function jr(r){return Ee&&globalThis.Buffer.isBuffer(r)}function Gr(r){return r instanceof Uint8Array?jr(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var qs=Ee?(r,t,e)=>e-t>64?globalThis.Buffer.from(r.subarray(t,e)).toString("utf8"):Ys(r,t,e):(r,t,e)=>e-t>64?Pl.decode(r.subarray(t,e)):Ys(r,t,e),Wr=Ee?r=>r.length>64?globalThis.Buffer.from(r):Ws(r):r=>r.length>64?zl.encode(r):Ws(r);var Ae=Ee?(r,t,e)=>jr(r)?new Uint8Array(r.subarray(t,e)):r.slice(t,e):(r,t,e)=>r.slice(t,e),Xs=Ee?(r,t)=>(r=r.map(e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e)),Gr(globalThis.Buffer.concat(r,t))):(r,t)=>{let e=new Uint8Array(t),n=0;for(let i of r)n+i.length>e.length&&(i=i.subarray(0,e.length-n)),e.set(i,n),n+=i.length;return e},Js=Ee?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function Zs(r,t){if(jr(r)&&jr(t))return r.compare(t);for(let e=0;e<r.length;e++)if(r[e]!==t[e])return r[e]<t[e]?-1:1;return 0}function Ws(r){let t=[],e=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t}function Ys(r,t,e){let n=[];for(;t<e;){let i=r[t],o=null,s=i>239?4:i>223?3:i>191?2:1;if(t+s<=e){let a,c,h,f;switch(s){case 1:i<128&&(o=i);break;case 2:a=r[t+1],(a&192)===128&&(f=(i&31)<<6|a&63,f>127&&(o=f));break;case 3:a=r[t+1],c=r[t+2],(a&192)===128&&(c&192)===128&&(f=(i&15)<<12|(a&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:a=r[t+1],c=r[t+2],h=r[t+3],(a&192)===128&&(c&192)===128&&(h&192)===128&&(f=(i&15)<<18|(a&63)<<12|(c&63)<<6|h&63,f>65535&&f<1114112&&(o=f))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),t+=s}return vi(n)}var Ks=4096;function vi(r){let t=r.length;if(t<=Ks)return String.fromCharCode.apply(String,r);let e="",n=0;for(;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=Ks));return e}var Rl=256,Yr=class{constructor(t=Rl){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let i=e.length-(this.maxCursor-this.cursor)-1;e.set(t,i)}else{if(e){let i=e.length-(this.maxCursor-this.cursor)-1;i<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,i),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=Js(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,this._initReuseChunk===null&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let e;if(this.chunks.length===1){let n=this.chunks[0];t&&this.cursor>n.length/2?(e=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=Ae(n,0,this.cursor)}else e=Xs(this.chunks,this.cursor);return t&&this.reset(),e}};var I="CBOR decode error:",Se="CBOR encode error:",hr=[];hr[23]=1;hr[24]=2;hr[25]=3;hr[26]=5;hr[27]=9;function Pt(r,t,e){if(r.length-t<e)throw new Error(`${I} not enough data for type`)}var j=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ut(r,t,e){Pt(r,t,1);let n=r[t];if(e.strict===!0&&n<j[0])throw new Error(`${I} integer encoded in more bytes than necessary (strict decode)`);return n}function ft(r,t,e){Pt(r,t,2);let n=r[t]<<8|r[t+1];if(e.strict===!0&&n<j[1])throw new Error(`${I} integer encoded in more bytes than necessary (strict decode)`);return n}function lt(r,t,e){Pt(r,t,4);let n=r[t]*16777216+(r[t+1]<<16)+(r[t+2]<<8)+r[t+3];if(e.strict===!0&&n<j[2])throw new Error(`${I} integer encoded in more bytes than necessary (strict decode)`);return n}function ht(r,t,e){Pt(r,t,8);let n=r[t]*16777216+(r[t+1]<<16)+(r[t+2]<<8)+r[t+3],i=r[t+4]*16777216+(r[t+5]<<16)+(r[t+6]<<8)+r[t+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(e.strict===!0&&o<j[3])throw new Error(`${I} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(e.allowBigInt===!0)return o;throw new Error(`${I} integers outside of the safe integer range are not supported`)}function Qs(r,t,e,n){return new A(p.uint,ut(r,t+1,n),2)}function ta(r,t,e,n){return new A(p.uint,ft(r,t+1,n),3)}function ea(r,t,e,n){return new A(p.uint,lt(r,t+1,n),5)}function ra(r,t,e,n){return new A(p.uint,ht(r,t+1,n),9)}function xt(r,t){return W(r,0,t.value)}function W(r,t,e){if(e<j[0]){let n=Number(e);r.push([t|n])}else if(e<j[1]){let n=Number(e);r.push([t|24,n])}else if(e<j[2]){let n=Number(e);r.push([t|25,n>>>8,n&255])}else if(e<j[3]){let n=Number(e);r.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(e);if(n<j[4]){let i=[t|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,r.push(i)}else throw new Error(`${I} encountered BigInt larger than allowable range`)}}xt.encodedSize=function(t){return W.encodedSize(t.value)};W.encodedSize=function(t){return t<j[0]?1:t<j[1]?2:t<j[2]?3:t<j[3]?5:9};xt.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};function na(r,t,e,n){return new A(p.negint,-1-ut(r,t+1,n),2)}function ia(r,t,e,n){return new A(p.negint,-1-ft(r,t+1,n),3)}function oa(r,t,e,n){return new A(p.negint,-1-lt(r,t+1,n),5)}var Ti=BigInt(-1),sa=BigInt(1);function aa(r,t,e,n){let i=ht(r,t+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new A(p.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${I} integers outside of the safe integer range are not supported`);return new A(p.negint,Ti-BigInt(i),9)}function Kr(r,t){let e=t.value,n=typeof e=="bigint"?e*Ti-sa:e*-1-1;W(r,t.type.majorEncoded,n)}Kr.encodedSize=function(t){let e=t.value,n=typeof e=="bigint"?e*Ti-sa:e*-1-1;return n<j[0]?1:n<j[1]?2:n<j[2]?3:n<j[3]?5:9};Kr.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0};function dr(r,t,e,n){Pt(r,t,e+n);let i=Ae(r,t+e,t+e+n);return new A(p.bytes,i,e+n)}function ca(r,t,e,n){return dr(r,t,1,e)}function ua(r,t,e,n){return dr(r,t,2,ut(r,t+1,n))}function fa(r,t,e,n){return dr(r,t,3,ft(r,t+1,n))}function la(r,t,e,n){return dr(r,t,5,lt(r,t+1,n))}function ha(r,t,e,n){let i=ht(r,t+1,n);if(typeof i=="bigint")throw new Error(`${I} 64-bit integer bytes lengths not supported`);return dr(r,t,9,i)}function qr(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===p.string?Wr(r.value):r.value),r.encodedBytes}function ke(r,t){let e=qr(t);W(r,t.type.majorEncoded,e.length),r.push(e)}ke.encodedSize=function(t){let e=qr(t);return W.encodedSize(e.length)+e.length};ke.compareTokens=function(t,e){return $l(qr(t),qr(e))};function $l(r,t){return r.length<t.length?-1:r.length>t.length?1:Zs(r,t)}function pr(r,t,e,n,i){let o=e+n;Pt(r,t,o);let s=new A(p.string,qs(r,t+e,t+o),o);return i.retainStringBytes===!0&&(s.byteValue=Ae(r,t+e,t+o)),s}function da(r,t,e,n){return pr(r,t,1,e,n)}function pa(r,t,e,n){return pr(r,t,2,ut(r,t+1,n),n)}function ma(r,t,e,n){return pr(r,t,3,ft(r,t+1,n),n)}function ya(r,t,e,n){return pr(r,t,5,lt(r,t+1,n),n)}function ga(r,t,e,n){let i=ht(r,t+1,n);if(typeof i=="bigint")throw new Error(`${I} 64-bit integer string lengths not supported`);return pr(r,t,9,i,n)}var wa=ke;function Be(r,t,e,n){return new A(p.array,n,e)}function xa(r,t,e,n){return Be(r,t,1,e)}function ba(r,t,e,n){return Be(r,t,2,ut(r,t+1,n))}function _a(r,t,e,n){return Be(r,t,3,ft(r,t+1,n))}function Ea(r,t,e,n){return Be(r,t,5,lt(r,t+1,n))}function Aa(r,t,e,n){let i=ht(r,t+1,n);if(typeof i=="bigint")throw new Error(`${I} 64-bit integer array lengths not supported`);return Be(r,t,9,i)}function Sa(r,t,e,n){if(n.allowIndefinite===!1)throw new Error(`${I} indefinite length items not allowed`);return Be(r,t,1,1/0)}function Xr(r,t){W(r,p.array.majorEncoded,t.value)}Xr.compareTokens=xt.compareTokens;Xr.encodedSize=function(t){return W.encodedSize(t.value)};function Ie(r,t,e,n){return new A(p.map,n,e)}function ka(r,t,e,n){return Ie(r,t,1,e)}function Ba(r,t,e,n){return Ie(r,t,2,ut(r,t+1,n))}function Ia(r,t,e,n){return Ie(r,t,3,ft(r,t+1,n))}function va(r,t,e,n){return Ie(r,t,5,lt(r,t+1,n))}function Ta(r,t,e,n){let i=ht(r,t+1,n);if(typeof i=="bigint")throw new Error(`${I} 64-bit integer map lengths not supported`);return Ie(r,t,9,i)}function Na(r,t,e,n){if(n.allowIndefinite===!1)throw new Error(`${I} indefinite length items not allowed`);return Ie(r,t,1,1/0)}function Jr(r,t){W(r,p.map.majorEncoded,t.value)}Jr.compareTokens=xt.compareTokens;Jr.encodedSize=function(t){return W.encodedSize(t.value)};function Ca(r,t,e,n){return new A(p.tag,e,1)}function Da(r,t,e,n){return new A(p.tag,ut(r,t+1,n),2)}function Fa(r,t,e,n){return new A(p.tag,ft(r,t+1,n),3)}function La(r,t,e,n){return new A(p.tag,lt(r,t+1,n),5)}function Ua(r,t,e,n){return new A(p.tag,ht(r,t+1,n),9)}function Zr(r,t){W(r,p.tag.majorEncoded,t.value)}Zr.compareTokens=xt.compareTokens;Zr.encodedSize=function(t){return W.encodedSize(t.value)};var Wl=20,Yl=21,Kl=22,ql=23;function Pa(r,t,e,n){if(n.allowUndefined===!1)throw new Error(`${I} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new A(p.null,null,1):new A(p.undefined,void 0,1)}function za(r,t,e,n){if(n.allowIndefinite===!1)throw new Error(`${I} indefinite length items not allowed`);return new A(p.break,void 0,1)}function Ni(r,t,e){if(e){if(e.allowNaN===!1&&Number.isNaN(r))throw new Error(`${I} NaN values are not supported`);if(e.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${I} Infinity values are not supported`)}return new A(p.float,r,t)}function Ra(r,t,e,n){return Ni(Ci(r,t+1),3,n)}function Oa(r,t,e,n){return Ni(Di(r,t+1),5,n)}function $a(r,t,e,n){return Ni(ja(r,t+1),9,n)}function Qr(r,t,e){let n=t.value;if(n===!1)r.push([p.float.majorEncoded|Wl]);else if(n===!0)r.push([p.float.majorEncoded|Yl]);else if(n===null)r.push([p.float.majorEncoded|Kl]);else if(n===void 0)r.push([p.float.majorEncoded|ql]);else{let i,o=!1;(!e||e.float64!==!0)&&(Ma(n),i=Ci(St,1),n===i||Number.isNaN(n)?(St[0]=249,r.push(St.slice(0,3)),o=!0):(Ha(n),i=Di(St,1),n===i&&(St[0]=250,r.push(St.slice(0,5)),o=!0))),o||(Xl(n),i=ja(St,1),St[0]=251,r.push(St.slice(0,9)))}}Qr.encodedSize=function(t,e){let n=t.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!e||e.float64!==!0){Ma(n);let i=Ci(St,1);if(n===i||Number.isNaN(n))return 3;if(Ha(n),i=Di(St,1),n===i)return 5}return 9};var Va=new ArrayBuffer(9),bt=new DataView(Va,1),St=new Uint8Array(Va,0);function Ma(r){if(r===1/0)bt.setUint16(0,31744,!1);else if(r===-1/0)bt.setUint16(0,64512,!1);else if(Number.isNaN(r))bt.setUint16(0,32256,!1);else{bt.setFloat32(0,r);let t=bt.getUint32(0),e=(t&2139095040)>>23,n=t&8388607;if(e===255)bt.setUint16(0,31744,!1);else if(e===0)bt.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=e-127;i<-24?bt.setUint16(0,0):i<-14?bt.setUint16(0,(t&2147483648)>>16|1<<24+i,!1):bt.setUint16(0,(t&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Ci(r,t){if(r.length-t<2)throw new Error(`${I} not enough data for float16`);let e=(r[t]<<8)+r[t+1];if(e===31744)return 1/0;if(e===64512)return-1/0;if(e===32256)return NaN;let n=e>>10&31,i=e&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,e&32768?-o:o}function Ha(r){bt.setFloat32(0,r,!1)}function Di(r,t){if(r.length-t<4)throw new Error(`${I} not enough data for float32`);let e=(r.byteOffset||0)+t;return new DataView(r.buffer,e,4).getFloat32(0,!1)}function Xl(r){bt.setFloat64(0,r,!1)}function ja(r,t){if(r.length-t<8)throw new Error(`${I} not enough data for float64`);let e=(r.byteOffset||0)+t;return new DataView(r.buffer,e,8).getFloat64(0,!1)}Qr.compareTokens=xt.compareTokens;function L(r,t,e){throw new Error(`${I} encountered invalid minor (${e}) for major ${r[t]>>>5}`)}function tn(r){return()=>{throw new Error(`${I} ${r}`)}}var k=[];for(let r=0;r<=23;r++)k[r]=L;k[24]=Qs;k[25]=ta;k[26]=ea;k[27]=ra;k[28]=L;k[29]=L;k[30]=L;k[31]=L;for(let r=32;r<=55;r++)k[r]=L;k[56]=na;k[57]=ia;k[58]=oa;k[59]=aa;k[60]=L;k[61]=L;k[62]=L;k[63]=L;for(let r=64;r<=87;r++)k[r]=ca;k[88]=ua;k[89]=fa;k[90]=la;k[91]=ha;k[92]=L;k[93]=L;k[94]=L;k[95]=tn("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)k[r]=da;k[120]=pa;k[121]=ma;k[122]=ya;k[123]=ga;k[124]=L;k[125]=L;k[126]=L;k[127]=tn("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)k[r]=xa;k[152]=ba;k[153]=_a;k[154]=Ea;k[155]=Aa;k[156]=L;k[157]=L;k[158]=L;k[159]=Sa;for(let r=160;r<=183;r++)k[r]=ka;k[184]=Ba;k[185]=Ia;k[186]=va;k[187]=Ta;k[188]=L;k[189]=L;k[190]=L;k[191]=Na;for(let r=192;r<=215;r++)k[r]=Ca;k[216]=Da;k[217]=Fa;k[218]=La;k[219]=Ua;k[220]=L;k[221]=L;k[222]=L;k[223]=L;for(let r=224;r<=243;r++)k[r]=tn("simple values are not supported");k[244]=L;k[245]=L;k[246]=L;k[247]=Pa;k[248]=tn("simple values are not supported");k[249]=Ra;k[250]=Oa;k[251]=$a;k[252]=L;k[253]=L;k[254]=L;k[255]=za;var kt=[];for(let r=0;r<24;r++)kt[r]=new A(p.uint,r,1);for(let r=-1;r>=-24;r--)kt[31-r]=new A(p.negint,r,1);kt[64]=new A(p.bytes,new Uint8Array(0),1);kt[96]=new A(p.string,"",1);kt[128]=new A(p.array,0,1);kt[160]=new A(p.map,0,1);kt[244]=new A(p.false,!1,1);kt[245]=new A(p.true,!0,1);kt[246]=new A(p.null,null,1);function Zl(){let r=[];return r[p.uint.major]=xt,r[p.negint.major]=Kr,r[p.bytes.major]=ke,r[p.string.major]=wa,r[p.array.major]=Xr,r[p.map.major]=Jr,r[p.tag.major]=Zr,r[p.float.major]=Qr,r}var U2=Zl(),P2=new Yr,en=class r{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do if(e.obj===t)return!0;while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${Se} object contains circular references`);return new r(e,t)}},qt={null:new A(p.null,null),undefined:new A(p.undefined,void 0),true:new A(p.true,!0),false:new A(p.false,!1),emptyArray:new A(p.array,0),emptyMap:new A(p.map,0)},Xt={number(r,t,e,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new A(p.float,r):r>=0?new A(p.uint,r):new A(p.negint,r)},bigint(r,t,e,n){return r>=BigInt(0)?new A(p.uint,r):new A(p.negint,r)},Uint8Array(r,t,e,n){return new A(p.bytes,r)},string(r,t,e,n){return new A(p.string,r)},boolean(r,t,e,n){return r?qt.true:qt.false},null(r,t,e,n){return qt.null},undefined(r,t,e,n){return qt.undefined},ArrayBuffer(r,t,e,n){return new A(p.bytes,new Uint8Array(r))},DataView(r,t,e,n){return new A(p.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,t,e,n){if(!r.length)return e.addBreakTokens===!0?[qt.emptyArray,new A(p.break)]:qt.emptyArray;n=en.createCheck(n,r);let i=[],o=0;for(let s of r)i[o++]=Fi(s,e,n);return e.addBreakTokens?[new A(p.array,r.length),i,new A(p.break)]:[new A(p.array,r.length),i]},Object(r,t,e,n){let i=t!=="Object",o=i?r.keys():Object.keys(r),s=i?r.size:o.length;if(!s)return e.addBreakTokens===!0?[qt.emptyMap,new A(p.break)]:qt.emptyMap;n=en.createCheck(n,r);let a=[],c=0;for(let h of o)a[c++]=[Fi(h,e,n),Fi(i?r.get(h):r[h],e,n)];return Ql(a,e),e.addBreakTokens?[new A(p.map,s),a,new A(p.break)]:[new A(p.map,s),a]}};Xt.Map=Xt.Object;Xt.Buffer=Xt.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Xt[`${r}Array`]=Xt.DataView;function Fi(r,t={},e){let n=Gs(r),i=t&&t.typeEncoders&&t.typeEncoders[n]||Xt[n];if(typeof i=="function"){let s=i(r,n,t,e);if(s!=null)return s}let o=Xt[n];if(!o)throw new Error(`${Se} unsupported type: ${n}`);return o(r,n,t,e)}function Ql(r,t){t.mapSorter&&r.sort(t.mapSorter)}var th={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Li=class{constructor(t,e={}){this._pos=0,this.data=t,this.options=e}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let t=this.data[this._pos],e=kt[t];if(e===void 0){let n=k[t];if(!n)throw new Error(`${I} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let i=t&31;e=n(this.data,this._pos,i,this.options)}return this._pos+=e.encodedLength,e}},mr=Symbol.for("DONE"),rn=Symbol.for("BREAK");function eh(r,t,e){let n=[];for(let i=0;i<r.value;i++){let o=yr(t,e);if(o===rn){if(r.value===1/0)break;throw new Error(`${I} got unexpected break to lengthed array`)}if(o===mr)throw new Error(`${I} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function rh(r,t,e){let n=e.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<r.value;s++){let a=yr(t,e);if(a===rn){if(r.value===1/0)break;throw new Error(`${I} got unexpected break to lengthed map`)}if(a===mr)throw new Error(`${I} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${I} non-string keys not supported (got ${typeof a})`);if(e.rejectDuplicateMapKeys===!0&&(n&&o.has(a)||!n&&a in i))throw new Error(`${I} found repeat map key "${a}"`);let c=yr(t,e);if(c===mr)throw new Error(`${I} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?o.set(a,c):i[a]=c}return n?o:i}function yr(r,t){if(r.done())return mr;let e=r.next();if(e.type===p.break)return rn;if(e.type.terminal)return e.value;if(e.type===p.array)return eh(e,r,t);if(e.type===p.map)return rh(e,r,t);if(e.type===p.tag){if(t.tags&&typeof t.tags[e.value]=="function"){let n=yr(r,t);return t.tags[e.value](n)}throw new Error(`${I} tag not supported (${e.value})`)}throw new Error("unsupported")}function Ui(r,t){if(!(r instanceof Uint8Array))throw new Error(`${I} data to decode must be a Uint8Array`);t=Object.assign({},th,t);let e=t.tokenizer||new Li(r,t),n=yr(e,t);if(n===mr)throw new Error(`${I} did not find any content to decode`);if(n===rn)throw new Error(`${I} got unexpected break`);return[n,r.subarray(e.pos())]}function gr(r,t){let[e,n]=Ui(r,t);if(n.length>0)throw new Error(`${I} too many terminals, data makes no sense`);return e}var Wa=42;function oh(r){return r instanceof ArrayBuffer?new Uint8Array(r,0,r.byteLength):r}function sh(r){if(r.asCID!==r&&r["/"]!==r.bytes)return null;let t=C.asCID(r);if(!t)return null;let e=new Uint8Array(t.bytes.byteLength+1);return e.set(t.bytes,1),[new A(p.tag,Wa),new A(p.bytes,e)]}function ah(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function ch(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Ga={float64:!0,typeEncoders:{Object:sh,undefined:ah,number:ch}},W2={...Ga,typeEncoders:{...Ga.typeEncoders}};function uh(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return C.decode(r.subarray(1))}var nn={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};nn.tags[Wa]=uh;var Y2={...nn,tags:nn.tags.slice()};var Ya=113;var Ka=r=>gr(oh(r),nn);var Xa=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(t){let e=this.inRecursive[this.inRecursive.length-1];e&&(e.type===p.array&&(e.elements++,e.elements!==1&&t.push([44])),e.type===p.map&&(e.elements++,e.elements!==1&&(e.elements%2===1?t.push([44]):t.push([58]))))}[p.uint.major](t,e){this.prefix(t);let n=String(e.value),i=[];for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);t.push(i)}[p.negint.major](t,e){this[p.uint.major](t,e)}[p.bytes.major](t,e){throw new Error(`${Se} unsupported type: Uint8Array`)}[p.string.major](t,e){this.prefix(t);let n=Wr(JSON.stringify(e.value));t.push(n.length>32?Gr(n):n)}[p.array.major](t,e){this.prefix(t),this.inRecursive.push({type:p.array,elements:0}),t.push([91])}[p.map.major](t,e){this.prefix(t),this.inRecursive.push({type:p.map,elements:0}),t.push([123])}[p.tag.major](t,e){}[p.float.major](t,e){if(e.type.name==="break"){let s=this.inRecursive.pop();if(s){if(s.type===p.array)t.push([93]);else if(s.type===p.map)t.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(e.value===void 0)throw new Error(`${Se} unsupported type: undefined`);if(this.prefix(t),e.type.name==="true"){t.push([116,114,117,101]);return}else if(e.type.name==="false"){t.push([102,97,108,115,101]);return}else if(e.type.name==="null"){t.push([110,117,108,108]);return}let n=String(e.value),i=[],o=!1;for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s),!o&&(i[s]===46||i[s]===101||i[s]===69)&&(o=!0);o||(i.push(46),i.push(48)),t.push(i)}};var ve=class{constructor(t,e={}){this._pos=0,this.data=t,this.options=e,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let t=this.ch();for(;t===32||t===9||t===13||t===10;)t=this.data[++this._pos]}expect(t){if(this.data.length-this._pos<t.length)throw new Error(`${I} unexpected end of input at position ${this._pos}`);for(let e=0;e<t.length;e++)if(this.data[this._pos++]!==t[e])throw new Error(`${I} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...t)}'`)}parseNumber(){let t=this._pos,e=!1,n=!1,i=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this._pos++;else break}};if(this.ch()===45&&(e=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new A(p.uint,0,this._pos-t);if(i([48,49,50,51,52,53,54,55,56,57]),e&&this._pos===t+1)throw new Error(`${I} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${I} unexpected token at position ${this._pos}`);n=!0,this._pos++,i([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,i([48,49,50,51,52,53,54,55,56,57]));let o=String.fromCharCode.apply(null,this.data.subarray(t,this._pos)),s=parseFloat(o);return n?new A(p.float,s,this._pos-t):this.options.allowBigInt!==!0||Number.isSafeInteger(s)?new A(s>=0?p.uint:p.negint,s,this._pos-t):new A(s>=0?p.uint:p.negint,BigInt(o),this._pos-t)}parseString(){if(this.ch()!==34)throw new Error(`${I} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let o=this._pos,s=0;o<this.data.length&&s<65536;o++,s++){let a=this.data[o];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this._pos,o));return this._pos=o+1,new A(p.string,c,s)}}let t=this._pos,e=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${I} unexpected end of unicode escape sequence at position ${this._pos}`);let o=0;for(let s=0;s<4;s++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${I} unexpected unicode escape character at position ${this._pos}`);o=o*16+a,this._pos++}return o},i=()=>{let o=this.ch(),s=null,a=o>239?4:o>223?3:o>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${I} unexpected unicode sequence at position ${this._pos}`);let c,h,f,l;switch(a){case 1:o<128&&(s=o);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(l=(o&31)<<6|c&63,l>127&&(s=l));break;case 3:c=this.data[this._pos+1],h=this.data[this._pos+2],(c&192)===128&&(h&192)===128&&(l=(o&15)<<12|(c&63)<<6|h&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:c=this.data[this._pos+1],h=this.data[this._pos+2],f=this.data[this._pos+3],(c&192)===128&&(h&192)===128&&(f&192)===128&&(l=(o&15)<<18|(c&63)<<12|(h&63)<<6|f&63,l>65535&&l<1114112&&(s=l))}s===null?(s=65533,a=1):s>65535&&(s-=65536,e.push(s>>>10&1023|55296),s=56320|s&1023),e.push(s),this._pos+=a};for(;!this.done();){let o=this.ch(),s;switch(o){case 92:if(this._pos++,this.done())throw new Error(`${I} unexpected string termination at position ${this._pos}`);switch(s=this.ch(),this._pos++,s){case 34:case 39:case 92:case 47:e.push(s);break;case 98:e.push(8);break;case 116:e.push(9);break;case 110:e.push(10);break;case 102:e.push(12);break;case 114:e.push(13);break;case 117:e.push(n());break;default:throw new Error(`${I} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new A(p.string,vi(e),this._pos-t);default:if(o<32)throw new Error(`${I} invalid control character at position ${this._pos}`);o<128?(e.push(o),this._pos++):i()}}throw new Error(`${I} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new A(p.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new A(p.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new A(p.null,null,4);case 102:return this.expect([102,97,108,115,101]),new A(p.false,!1,5);case 116:return this.expect([116,114,117,101]),new A(p.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${I} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new A(p.break,void 0,1);if(this.ch()!==44)throw new Error(`${I} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new A(p.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new A(p.break,void 0,1);if(this.ch()!==44)throw new Error(`${I} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new A(p.break,void 0,1);let t=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${I} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),t}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${I} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}};function Pi(r,t){return t=Object.assign({tokenizer:new ve(r,t)},t),gr(r,t)}function hh(r){return r instanceof ArrayBuffer?new Uint8Array(r,0,r.byteLength):r}var zi=class extends ve{constructor(t,e){super(t,e),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let t=this._next();if(t.type===p.map){let e=this._next();if(e.type===p.string&&e.value==="/"){let n=this._next();if(n.type===p.string){if(this._next().type!==p.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new A(p.tag,42,0)}if(n.type===p.map){let i=this._next();if(i.type===p.string&&i.value==="bytes"){let o=this._next();if(o.type===p.string){for(let a=0;a<2;a++)if(this._next().type!==p.break)throw new Error("Invalid encoded Bytes form");let s=Qe.decode(`m${o.value}`);return new A(p.bytes,s,o.value.length)}this.tokenBuffer.push(o)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(e)}return t}},Ri={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Ri.tags[42]=C.parse;var Ja=297;var Za=r=>{let t=hh(r),e=Object.assign(Ri,{tokenizer:new zi(t,Ri)});return Pi(t,e)};var ly=new TextDecoder;var hy=new TextEncoder;var Sc=P(q(),1);var tc=P(q(),1);function Te(r,t,e,n,i,o,s){let a=r,c=i;for(;o.length>0;){let h=o[0];if(h in a){o.shift(),c=`${c}/${h}`;let f=C.asCID(a[h]);if(f!=null)return{entry:{type:"object",name:n,path:i,cid:e,node:t,depth:s,size:BigInt(t.length),content:async function*(){yield r}},next:{cid:f,name:h,path:c,toResolve:o}};a=a[h]}else throw(0,tc.default)(new Error(`No property named ${h} found in node ${e}`),"ERR_NO_PROP")}return{entry:{type:"object",name:n,path:i,cid:e,node:t,depth:s,size:BigInt(t.length),content:async function*(){yield r}}}}var dh=async(r,t,e,n,i,o,s,a)=>{let c=await s.get(r,a),h=Ka(c);return Te(h,c,r,t,e,n,o)},ec=dh;var ph=async(r,t,e,n,i,o,s,a)=>{let c=await s.get(r,a),h=Za(c);return Te(h,c,r,t,e,n,o)},rc=ph;var nc=P(q(),1);function mh(r,t,e,n){let i=BigInt(r.length),o=BigInt(t+i);return e>=o||n<t?new Uint8Array(0):(n>=t&&n<o&&(r=r.subarray(0,Number(n-t))),e>=t&&e<o&&(r=r.subarray(Number(e-t))),r)}var ae=mh;var wr=P(q(),1),yh=(r,t=0,e=r)=>{let n=BigInt(r),i=BigInt(t??0),o=BigInt(e);if(o!==n&&(o=i+o),o>n&&(o=n),i<0n)throw(0,wr.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(i>n)throw(0,wr.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(o<0n)throw(0,wr.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(o>n)throw(0,wr.default)(new Error("Length must be less than the file size"),"ERR_INVALID_PARAMS");return{start:i,end:o}},Ne=yh;var gh=r=>{async function*t(e={}){let{start:n,end:i}=Ne(r.length,e.offset,e.length),o=ae(r,0n,n,i);e.onProgress?.(new O("unixfs:exporter:progress:identity",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(r.byteLength)})),yield o}return t},wh=async(r,t,e,n,i,o,s,a)=>{if(n.length>0)throw(0,nc.default)(new Error(`No link named ${e} found in raw node ${r}`),"ERR_NOT_FOUND");let c=Cr(r.multihash.bytes);return{entry:{type:"identity",name:t,path:e,cid:r,content:gh(c.digest),depth:o,size:BigInt(c.digest.length),node:c.digest}}},ic=wh;var xh=async(r,t,e,n,i,o,s,a)=>{let c=await s.get(r,a),h=Wo(c);return Te(h,c,r,t,e,n,o)},oc=xh;var sc=P(q(),1);var bh=r=>{async function*t(e={}){let{start:n,end:i}=Ne(r.length,e.offset,e.length),o=ae(r,0n,n,i);e.onProgress?.(new O("unixfs:exporter:progress:raw",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(r.byteLength)})),yield o}return t},_h=async(r,t,e,n,i,o,s,a)=>{if(n.length>0)throw(0,sc.default)(new Error(`No link named ${e} found in raw node ${r}`),"ERR_NOT_FOUND");let c=await s.get(r,a);return{entry:{type:"raw",name:t,path:e,cid:r,content:bh(c),depth:o,size:BigInt(c.length),node:c}}},ac=_h;var Sr=P(q(),1);var xr=P(q(),1);var Eh=async function(r){return(await oe.encode(r)).slice(0,8).reverse()},Ah=async(r,t,e)=>{let n=(t.tableSize()-1).toString(16).length;await Promise.all(r.map(async i=>{if(i.Name==null)throw new Error("Unexpected Link without a Name");if(i.Name.length===n){let o=parseInt(i.Name,16);t._putObjectAt(o,new ct({hash:e._options.hash,bits:e._options.bits},t,o));return}await e.put(i.Name.substring(2),!0)}))},cc=(r,t)=>r.toString(16).toUpperCase().padStart(t,"0").substring(0,t),Sh=r=>{let t=r.bucket,e=[];for(;t._parent!=null;)e.push(t),t=t._parent;return e.push(t),e.reverse()},uc=async(r,t,e,n,i)=>{if(n==null){if(r.Data==null)throw(0,xr.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let l;try{l=T.unmarshal(r.Data)}catch(u){throw(0,xr.default)(u,"ERR_NOT_UNIXFS")}if(l.type!=="hamt-sharded-directory")throw(0,xr.default)(new Error("not a HAMT"),"ERR_NOT_UNIXFS");if(l.fanout==null)throw(0,xr.default)(new Error("missing fanout"),"ERR_NOT_UNIXFS");let m=_e({hashFn:Eh,bits:Math.log2(Number(l.fanout))});n={rootBucket:m,hamtDepth:1,lastBucket:m}}let o=(n.lastBucket.tableSize()-1).toString(16).length;await Ah(r.Links,n.lastBucket,n.rootBucket);let s=await n.rootBucket._findNewBucketAndPos(t),a=cc(s.pos,o),c=Sh(s);c.length>n.hamtDepth&&(n.lastBucket=c[n.hamtDepth],a=cc(n.lastBucket._posAtParent,o));let h=r.Links.find(l=>{if(l.Name==null)return!1;let m=l.Name.substring(0,o),u=l.Name.substring(o);return!(m!==a||u!==""&&u!==t)});if(h==null)return;if(h.Name!=null&&h.Name.substring(o)===t)return h.Hash;n.hamtDepth++;let f=await e.get(h.Hash,i);return r=V(f),uc(r,t,e,n,i)},fc=uc;function kh(r){let[t,e]=r[Symbol.asyncIterator]!=null?[r[Symbol.asyncIterator](),Symbol.asyncIterator]:[r[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:t.next(),[e](){return this}}}var on=kh;function Bh(r){return r[Symbol.asyncIterator]!=null}function Ih(r,t){if(Bh(r))return async function*(){for await(let a of r)await t(a)&&(yield a)}();let e=on(r),{value:n,done:i}=e.next();if(i===!0)return function*(){}();let o=t(n);if(typeof o.then=="function")return async function*(){await o&&(yield n);for await(let a of e)await t(a)&&(yield a)}();let s=t;return function*(){o===!0&&(yield n);for(let a of e)s(a)&&(yield a)}()}var lc=Ih;function vh(r){return r[Symbol.asyncIterator]!=null}function Th(r,t){if(vh(r))return async function*(){for await(let a of r)yield t(a)}();let e=on(r),{value:n,done:i}=e.next();if(i===!0)return function*(){}();let o=t(n);if(typeof o.then=="function")return async function*(){yield await o;for await(let a of e)yield t(a)}();let s=t;return function*(){yield o;for(let a of e)yield s(a)}()}var Ce=Th;function zt(){let r={};return r.promise=new Promise((t,e)=>{r.resolve=t,r.reject=e}),r}var sn=globalThis.CustomEvent??Event;async function*ce(r,t={}){let e=t.concurrency??1/0;e<1&&(e=1/0);let n=t.ordered==null?!1:t.ordered,i=new EventTarget,o=[],s=zt(),a=zt(),c=!1,h,f=!1;i.addEventListener("task-complete",()=>{a.resolve()}),Promise.resolve().then(async()=>{try{for await(let d of r){if(o.length===e&&(s=zt(),await s.promise),f)break;let y={done:!1};o.push(y),d().then(_=>{y.done=!0,y.ok=!0,y.value=_,i.dispatchEvent(new sn("task-complete"))},_=>{y.done=!0,y.err=_,i.dispatchEvent(new sn("task-complete"))})}c=!0,i.dispatchEvent(new sn("task-complete"))}catch(d){h=d,i.dispatchEvent(new sn("task-complete"))}});function l(){return n?o[0]?.done:!!o.find(d=>d.done)}function*m(){for(;o.length>0&&o[0].done;){let d=o[0];if(o.shift(),d.ok)yield d.value;else throw f=!0,s.resolve(),d.err;s.resolve()}}function*u(){for(;l();)for(let d=0;d<o.length;d++)if(o[d].done){let y=o[d];if(o.splice(d,1),d--,y.ok)yield y.value;else throw f=!0,s.resolve(),y.err;s.resolve()}}for(;;){if(l()||(a=zt(),await a.promise),h!=null)throw h;if(n?yield*m():yield*u(),c&&o.length===0)break}}var an=class{buffer;mask;top;btm;next;constructor(t){if(!(t>0)||t-1&t)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){let t=this.buffer[this.btm];if(t!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return this.buffer[this.btm]===void 0}},De=class{size;hwm;head;tail;constructor(t={}){this.hwm=t.splitLimit??16,this.head=new an(this.hwm),this.tail=this.head,this.size=0}calculateSize(t){return t?.byteLength!=null?t.byteLength:1}push(t){if(t?.value!=null&&(this.size+=this.calculateSize(t.value)),!this.head.push(t)){let e=this.head;this.head=e.next=new an(2*this.head.buffer.length),this.head.push(t)}}shift(){let t=this.tail.shift();if(t===void 0&&this.tail.next!=null){let e=this.tail.next;this.tail.next=null,this.tail=e,t=this.tail.shift()}return t?.value!=null&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}};var Oi=class extends Error{type;code;constructor(t,e){super(t??"The operation was aborted"),this.type="aborted",this.code=e??"ABORT_ERR"}};function Fe(r={}){return Nh(e=>{let n=e.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function Nh(r,t){t=t??{};let e=t.onEnd,n=new De,i,o,s,a=zt(),c=async()=>{try{return n.isEmpty()?s?{done:!0}:await new Promise((_,g)=>{o=w=>{o=null,n.push(w);try{_(r(n))}catch(b){g(b)}return i}}):r(n)}finally{n.isEmpty()&&queueMicrotask(()=>{a.resolve(),a=zt()})}},h=_=>o!=null?o(_):(n.push(_),i),f=_=>(n=new De,o!=null?o({error:_}):(n.push({error:_}),i)),l=_=>{if(s)return i;if(t?.objectMode!==!0&&_?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return h({done:!1,value:_})},m=_=>s?i:(s=!0,_!=null?f(_):h({done:!0})),u=()=>(n=new De,m(),{done:!0}),d=_=>(m(_),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:u,throw:d,push:l,end:m,get readableLength(){return n.size},onEmpty:async _=>{let g=_?.signal;if(g?.throwIfAborted(),n.isEmpty())return;let w,b;g!=null&&(w=new Promise((E,v)=>{b=()=>{v(new Oi)},g.addEventListener("abort",b)}));try{await Promise.race([a.promise,w])}finally{b!=null&&g!=null&&g?.removeEventListener("abort",b)}}},e==null)return i;let y=i;return i={[Symbol.asyncIterator](){return this},next(){return y.next()},throw(_){return y.throw(_),e!=null&&(e(_),e=void 0),{done:!0}},return(){return y.return(),e!=null&&(e(),e=void 0),{done:!0}},push:l,end(_){return y.end(_),e!=null&&(e(_),e=void 0),i},get readableLength(){return y.readableLength},onEmpty:_=>y.onEmpty(_)},i}function Ch(r){return r[Symbol.asyncIterator]!=null}function Dh(...r){let t=[];for(let e of r)Ch(e)||t.push(e);return t.length===r.length?function*(){for(let e of t)yield*e}():async function*(){let e=Fe({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(r.map(async n=>{for await(let i of n)e.push(i)})),e.end()}catch(n){e.end(n)}}),yield*e}()}var hc=Dh;function Nt(r,...t){if(r==null)throw new Error("Empty pipeline");if($i(r)){let n=r;r=()=>n.source}else if(pc(r)||dc(r)){let n=r;r=()=>n}let e=[r,...t];if(e.length>1&&$i(e[e.length-1])&&(e[e.length-1]=e[e.length-1].sink),e.length>2)for(let n=1;n<e.length-1;n++)$i(e[n])&&(e[n]=Lh(e[n]));return Fh(...e)}var Fh=(...r)=>{let t;for(;r.length>0;)t=r.shift()(t);return t},dc=r=>r?.[Symbol.asyncIterator]!=null,pc=r=>r?.[Symbol.iterator]!=null,$i=r=>r==null?!1:r.sink!=null&&r.source!=null,Lh=r=>t=>{let e=r.sink(t);if(e?.then!=null){let n=Fe({objectMode:!0});e.then(()=>{n.end()},s=>{n.end(s)});let i,o=r.source;if(dc(o))i=async function*(){yield*o,n.end()};else if(pc(o))i=function*(){yield*o,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return hc(n,i())}return r.source};var Uh=(r,t,e,n,i,o,s)=>{async function*a(c={}){let h=c.offset??0,f=c.length??t.Links.length,l=t.Links.slice(h,f);c.onProgress?.(new O("unixfs:exporter:walk:directory",{cid:r})),yield*Nt(l,m=>Ce(m,u=>async()=>{let d=u.Name??"",y=`${n}/${d}`;return(await i(u.Hash,d,y,[],o+1,s,c)).entry}),m=>ce(m,{ordered:!0,concurrency:c.blockReadConcurrency}),m=>lc(m,u=>u!=null))}return a},mc=Uh;var ue=P(q(),1);var Mi=P(gc(),1);var _r=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},Hi=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},wc=r=>globalThis.DOMException===void 0?new Hi(r):new DOMException(r),xc=r=>{let t=r.reason===void 0?wc("This operation was aborted."):r.reason;return t instanceof Error?t:wc(t)};function ji(r,t){let{milliseconds:e,fallback:n,message:i,customTimers:o={setTimeout,clearTimeout}}=t,s,c=new Promise((h,f)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(t.signal){let{signal:m}=t;m.aborted&&f(xc(m)),m.addEventListener("abort",()=>{f(xc(m))})}if(e===Number.POSITIVE_INFINITY){r.then(h,f);return}let l=new _r;s=o.setTimeout.call(void 0,()=>{if(n){try{h(n())}catch(m){f(m)}return}typeof r.cancel=="function"&&r.cancel(),i===!1?h():i instanceof Error?f(i):(l.message=i??`Promise timed out after ${e} milliseconds`,f(l))},e),(async()=>{try{h(await r)}catch(m){f(m)}})()}).finally(()=>{c.clear()});return c.clear=()=>{o.clearTimeout.call(void 0,s),s=void 0},c}function Gi(r,t,e){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;e(r[s],t)<=0?(n=++s,i-=o+1):i=o}return n}var Er=class{#t=[];enqueue(t,e){e={priority:0,...e};let n={priority:e.priority,run:t};if(this.size&&this.#t[this.size-1].priority>=e.priority){this.#t.push(n);return}let i=Gi(this.#t,n,(o,s)=>s.priority-o.priority);this.#t.splice(i,0,n)}dequeue(){return this.#t.shift()?.run}filter(t){return this.#t.filter(e=>e.priority===t.priority).map(e=>e.run)}get size(){return this.#t.length}};var Ar=class extends Mi.default{#t;#r;#n=0;#u;#s;#c=0;#i;#f;#e;#m;#o=0;#l;#a;#y;timeout;constructor(t){if(super(),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Er,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);this.#t=t.carryoverConcurrencyCount,this.#r=t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,this.#u=t.intervalCap,this.#s=t.interval,this.#e=new t.queueClass,this.#m=t.queueClass,this.concurrency=t.concurrency,this.timeout=t.timeout,this.#y=t.throwOnTimeout===!0,this.#a=t.autoStart===!1}get#x(){return this.#r||this.#n<this.#u}get#b(){return this.#o<this.#l}#_(){this.#o--,this.#h(),this.emit("next")}#E(){this.#w(),this.#g(),this.#f=void 0}get#A(){let t=Date.now();if(this.#i===void 0){let e=this.#c-t;if(e<0)this.#n=this.#t?this.#o:0;else return this.#f===void 0&&(this.#f=setTimeout(()=>{this.#E()},e)),!0}return!1}#h(){if(this.#e.size===0)return this.#i&&clearInterval(this.#i),this.#i=void 0,this.emit("empty"),this.#o===0&&this.emit("idle"),!1;if(!this.#a){let t=!this.#A;if(this.#x&&this.#b){let e=this.#e.dequeue();return e?(this.emit("active"),e(),t&&this.#g(),!0):!1}}return!1}#g(){this.#r||this.#i!==void 0||(this.#i=setInterval(()=>{this.#w()},this.#s),this.#c=Date.now()+this.#s)}#w(){this.#n===0&&this.#o===0&&this.#i&&(clearInterval(this.#i),this.#i=void 0),this.#n=this.#t?this.#o:0,this.#d()}#d(){for(;this.#h(););}get concurrency(){return this.#l}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#l=t,this.#d()}async#S(t){return new Promise((e,n)=>{t.addEventListener("abort",()=>{n(t.reason)},{once:!0})})}async add(t,e={}){return e={timeout:this.timeout,throwOnTimeout:this.#y,...e},new Promise((n,i)=>{this.#e.enqueue(async()=>{this.#o++,this.#n++;try{e.signal?.throwIfAborted();let o=t({signal:e.signal});e.timeout&&(o=ji(Promise.resolve(o),{milliseconds:e.timeout})),e.signal&&(o=Promise.race([o,this.#S(e.signal)]));let s=await o;n(s),this.emit("completed",s)}catch(o){if(o instanceof _r&&!e.throwOnTimeout){n();return}i(o),this.emit("error",o)}finally{this.#_()}},e),this.emit("add"),this.#h()})}async addAll(t,e){return Promise.all(t.map(async n=>this.add(n,e)))}start(){return this.#a?(this.#a=!1,this.#d(),this):this}pause(){this.#a=!0}clear(){this.#e=new this.#m}async onEmpty(){this.#e.size!==0&&await this.#p("empty")}async onSizeLessThan(t){this.#e.size<t||await this.#p("next",()=>this.#e.size<t)}async onIdle(){this.#o===0&&this.#e.size===0||await this.#p("idle")}async#p(t,e){return new Promise(n=>{let i=()=>{e&&!e()||(this.off(t,i),n())};this.on(t,i)})}get size(){return this.#e.size}sizeBy(t){return this.#e.filter(t).length}get pending(){return this.#o}get isPaused(){return this.#a}};async function bc(r,t,e,n,i,o,s){if(t instanceof Uint8Array){let h=ae(t,n,i,o);e.push(h);return}if(t.Data==null)throw(0,ue.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let a;try{a=T.unmarshal(t.Data)}catch(h){throw(0,ue.default)(h,"ERR_NOT_UNIXFS")}if(a.data!=null){let h=a.data,f=ae(h,n,i,o);e.push(f),n+=BigInt(f.byteLength)}let c=[];if(t.Links.length!==a.blockSizes.length)throw(0,ue.default)(new Error("Inconsistent block sizes and dag links"),"ERR_NOT_UNIXFS");for(let h=0;h<t.Links.length;h++){let f=t.Links[h],l=n,m=l+a.blockSizes[h];if((i>=l&&i<m||o>=l&&o<=m||i<l&&o>m)&&c.push({link:f,blockStart:n}),n=m,n>o)break}await Nt(c,h=>Ce(h,f=>async()=>{let l=await r.get(f.link.Hash,s);return{...f,block:l}}),h=>ce(h,{ordered:!0,concurrency:s.blockReadConcurrency}),async h=>{for await(let{link:f,block:l,blockStart:m}of h){let u;switch(f.Hash.code){case G:u=V(l);break;case it:u=l;break;default:e.end((0,ue.default)(new Error(`Unsupported codec: ${f.Hash.code}`),"ERR_NOT_UNIXFS"));return}let d=new Ar({concurrency:1});d.on("error",y=>{e.end(y)}),d.add(async()=>{s.onProgress?.(new O("unixfs:exporter:walk:file",{cid:f.Hash})),await bc(r,u,e,m,i,o,s)}),await d.onIdle()}}),n>=o&&e.end()}var Rh=(r,t,e,n,i,o,s)=>{async function*a(c={}){let h=e.fileSize();if(h===void 0)throw new Error("File was a directory");let{start:f,end:l}=Ne(h,c.offset,c.length);if(l===0n)return;let m=0n,u=l-f,d=Fe();c.onProgress?.(new O("unixfs:exporter:walk:file",{cid:r})),bc(s,t,d,0n,f,l,c).catch(y=>{d.end(y)});for await(let y of d)if(y!=null){if(m+=BigInt(y.byteLength),m>u)throw d.end(),(0,ue.default)(new Error("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect"),"ERR_OVER_READ");m===u&&d.end(),c.onProgress?.(new O("unixfs:exporter:progress:unixfs:file",{bytesRead:m,totalBytes:u,fileSize:h})),yield y}if(m<u)throw(0,ue.default)(new Error("Traversed entire DAG but did not read enough bytes"),"ERR_UNDER_READ")}return a},Wi=Rh;var un=P(q(),1);var Oh=(r,t,e,n,i,o,s)=>{function a(c={}){return c.onProgress?.(new O("unixfs:exporter:walk:hamt-sharded-directory",{cid:r})),_c(t,n,i,o,s,c)}return a};async function*_c(r,t,e,n,i,o){let s=r.Links;if(r.Data==null)throw(0,un.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let a;try{a=T.unmarshal(r.Data)}catch(f){throw(0,un.default)(f,"ERR_NOT_UNIXFS")}if(a.fanout==null)throw(0,un.default)(new Error("missing fanout"),"ERR_NOT_UNIXFS");let c=(a.fanout-1n).toString(16).length,h=Nt(s,f=>Ce(f,l=>async()=>{let m=l.Name!=null?l.Name.substring(c):null;if(m!=null&&m!==""){let u=await e(l.Hash,m,`${t}/${m}`,[],n+1,i,o);return{entries:u.entry==null?[]:[u.entry]}}else{let u=await i.get(l.Hash,o);return r=V(u),o.onProgress?.(new O("unixfs:exporter:walk:hamt-sharded-directory",{cid:l.Hash})),{entries:_c(r,t,e,n,i,o)}}}),f=>ce(f,{ordered:!0,concurrency:o.blockReadConcurrency}));for await(let{entries:f}of h)yield*f}var Ec=Oh;var $h=(r,t)=>r.Links.find(n=>n.Name===t)?.Hash,Vh={raw:Wi,file:Wi,directory:mc,"hamt-sharded-directory":Ec,metadata:(r,t,e,n,i,o,s)=>()=>[],symlink:(r,t,e,n,i,o,s)=>()=>[]},Mh=async(r,t,e,n,i,o,s,a)=>{let c=await s.get(r,a),h=V(c),f,l;if(t==null&&(t=r.toString()),h.Data==null)throw(0,Sr.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{f=T.unmarshal(h.Data)}catch(u){throw(0,Sr.default)(u,"ERR_NOT_UNIXFS")}if(e==null&&(e=t),n.length>0){let u;if(f?.type==="hamt-sharded-directory"?u=await fc(h,n[0],s):u=$h(h,n[0]),u==null)throw(0,Sr.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let d=n.shift(),y=`${e}/${d}`;l={cid:u,toResolve:n,name:d??"",path:y}}let m=Vh[f.type](r,h,f,e,i,o,s);if(m==null)throw(0,Sr.default)(new Error("could not find content exporter"),"ERR_NOT_FOUND");return f.isDirectory()?{entry:{type:"directory",name:t,path:e,cid:r,content:m,unixfs:f,depth:o,node:h,size:f.fileSize()},next:l}:{entry:{type:"file",name:t,path:e,cid:r,content:m,unixfs:f,depth:o,node:h,size:f.fileSize()},next:l}},Ac=Mh;var Hh={[G]:Ac,[it]:ac,[Ya]:ec,[Ja]:rc,[ii.code]:ic,[Go]:oc},kc=async(r,t,e,n,i,o,s)=>{let a=Hh[r.code];if(a==null)throw(0,Sc.default)(new Error(`No resolver for code ${r.code}`),"ERR_NO_RESOLVER");return a(r,t,e,n,kc,i,o,s)},Bc=kc;var jh=(r="")=>(r.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean),Gh=r=>{if(r instanceof Uint8Array)return{cid:C.decode(r),toResolve:[]};let t=C.asCID(r);if(t!=null)return{cid:t,toResolve:[]};if(typeof r=="string"){r.indexOf("/ipfs/")===0&&(r=r.substring(6));let e=jh(r);return{cid:C.parse(e[0]),toResolve:e.slice(1)}}throw(0,fn.default)(new Error(`Unknown path type ${r}`),"ERR_BAD_PATH")};async function*Yi(r,t,e={}){let{cid:n,toResolve:i}=Gh(r),o=n.toString(),s=o,a=i.length;for(;;){let c=await Bc(n,o,s,i,a,t,e);if(c.entry==null&&c.next==null)throw(0,fn.default)(new Error(`Could not resolve ${r}`),"ERR_NOT_FOUND");if(c.entry!=null&&(yield c.entry),c.next==null)return;i=c.next.toResolve,n=c.next.cid,o=c.next.name,s=c.next.path}}async function et(r,t,e={}){let n=await Kt(Yi(r,t,e));if(n==null)throw(0,fn.default)(new Error(`Could not resolve ${r}`),"ERR_NOT_FOUND");return n}async function*ln(r,t,e={}){let n=await et(r,t,e);if(n==null)return;if(yield n,n.type==="directory")for await(let o of i(n,e))yield o;async function*i(o,s){for await(let a of o.content(s))yield a,!(a instanceof Uint8Array)&&a.type==="directory"&&(yield*i(a,s))}}var Uc=P(Lc(),1),Z=Uc.default;var Bt=class extends Error{name;code;constructor(t,e,n){super(t),this.name=e,this.code=n}},Ct=class extends Bt{constructor(t="not a Unixfs node"){super(t,"NotUnixFSError","ERR_NOT_UNIXFS")}},rt=class extends Bt{constructor(t="invalid PBNode"){super(t,"InvalidPBNodeError","ERR_INVALID_PBNODE")}},Rt=class extends Bt{constructor(t="unknown error"){super(t,"InvalidPBNodeError","ERR_UNKNOWN_ERROR")}},fe=class extends Bt{constructor(t="path already exists"){super(t,"AlreadyExistsError","ERR_ALREADY_EXISTS")}},Ot=class extends Bt{constructor(t="path does not exist"){super(t,"DoesNotExistError","ERR_DOES_NOT_EXIST")}},Pe=class extends Bt{constructor(t="no content"){super(t,"NoContentError","ERR_NO_CONTENT")}},pn=class extends Bt{constructor(t="not a file"){super(t,"NotAFileError","ERR_NOT_A_FILE")}},Dt=class extends Bt{constructor(t="not a directory"){super(t,"NotADirectoryError","ERR_NOT_A_DIRECTORY")}},Y=class extends Bt{constructor(t="invalid parameters"){super(t,"InvalidParametersError","ERR_INVALID_PARAMETERS")}};var pt=P($c(),1);pt.default.formatters.b=r=>r==null?"undefined":gt.baseEncode(r);pt.default.formatters.t=r=>r==null?"undefined":jt.baseEncode(r);pt.default.formatters.m=r=>r==null?"undefined":Qe.baseEncode(r);pt.default.formatters.p=r=>r==null?"undefined":r.toString();pt.default.formatters.c=r=>r==null?"undefined":r.toString();pt.default.formatters.k=r=>r==null?"undefined":r.toString();pt.default.formatters.a=r=>r==null?"undefined":r.toString();function u1(r){let t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=r,t.destroy=()=>!0,t.extend=()=>t,t}function $(r){let t=u1(`${r}:trace`);return pt.default.enabled(`${r}:trace`)&&pt.default.names.map(e=>e.toString()).find(e=>e.includes(":trace"))!=null&&(t=(0,pt.default)(`${r}:trace`)),Object.assign((0,pt.default)(r),{error:(0,pt.default)(`${r}:error`),trace:t})}var Zi=P($r(),1);function wn(r){function t(e){return e instanceof gn?e:new gn(e,r)}return t}var gn=class{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(t,e){if(!(t instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=t,this._hashFn=e,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(t){let e=t;for(;this._availableBits<e;)await this._produceMoreBits();let n=0;for(;e>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),e),s=i.take(o);n=(n<<o)+s,e-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(t){let e=t;for(;e>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),e);n.untake(i),e-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let t=this._depth>0?Zt([this._value,Uint8Array.from([this._depth])]):this._value,e=await this._hashFn(t),n=new qi(e);this._buffers.push(n),this._availableBits+=n.availableBits()}},f1=[255,254,252,248,240,224,192,128],l1=[1,3,7,15,31,63,127,255],qi=class{_value;_currentBytePos;_currentBitPos;constructor(t){this._value=t,this._currentBytePos=t.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(t){let e=t,n=0;for(;e>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,e),a=h1(i,o-s,s);n=(n<<s)+a,e-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(t){for(this._currentBitPos+=t;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function h1(r,t,e){let n=d1(t,e);return(r&n)>>>t}function d1(r,t){return f1[r]&l1[Math.min(t+r-1,7)]}var kr=BigInt(oe.code),he=8;async function $e(r){return(await oe.encode(r)).subarray(0,8).reverse()}var Hc=P($r(),1);var It=async(r,t,e)=>{e.codec==null&&(e.codec=M);let n=await at.digest(r),i=C.create(e.cidVersion,e.codec.code,n);return await t.put(i,r,{...e,signal:e.signal}),i};var Xi=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(t,e){this.options=e??{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime}},xn=class extends Xi{_bucket;constructor(t,e){super(t,e),this._bucket=_e({hashFn:$e,bits:8})}async put(t,e){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(t,e)}async get(t){return this._bucket.get(t)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:t,value:e}of this._bucket.eachLeafSeries())yield{key:t,child:e}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=Mc(this._bucket,this,this.options),this.nodeSize)}async*flush(t){for await(let e of Vc(this._bucket,t,this,this.options))yield{...e,path:this.path}}};async function*Vc(r,t,e,n){let i=r._children,o=[],s=0n;for(let u=0;u<i.length;u++){let d=i.get(u);if(d==null)continue;let y=u.toString(16).toUpperCase().padStart(2,"0");if(d instanceof ct){let _;for await(let g of Vc(d,t,null,n))_=g;if(_==null)throw new Error("Could not flush sharded directory, no subshard found");o.push({Name:y,Tsize:Number(_.size),Hash:_.cid}),s+=_.size}else if(p1(d.value)){let _=d.value,g;for await(let b of _.flush(t))g=b,yield g;if(g==null)throw new Error("Did not flush dir");let w=y+d.key;o.push({Name:w,Tsize:Number(g.size),Hash:g.cid}),s+=g.size}else{let _=d.value;if(_.cid==null)continue;let g=y+d.key,w=_.size;o.push({Name:g,Tsize:Number(w),Hash:_.cid}),s+=BigInt(w??0)}}let a=Uint8Array.from(i.bitField().reverse()),c=new T({type:"hamt-sharded-directory",data:a,fanout:BigInt(r.tableSize()),hashType:kr,mtime:e?.mtime,mode:e?.mode}),h={Data:c.marshal(),Links:o},f=F(R(h)),l=await It(f,t,n),m=BigInt(f.byteLength)+s;yield{cid:l,unixfs:c,size:m}}function p1(r){return typeof r.flush=="function"}function Mc(r,t,e){let n=r._children,i=[];for(let c=0;c<n.length;c++){let h=n.get(c);if(h==null)continue;let f=c.toString(16).toUpperCase().padStart(2,"0");if(h instanceof ct){let l=Mc(h,null,e);i.push({Name:f,Tsize:Number(l),Hash:e.cidVersion===0?bn:_n})}else if(typeof h.value.flush=="function"){let m=h.value.nodeSize();i.push({Name:f+h.key,Tsize:Number(m),Hash:e.cidVersion===0?bn:_n})}else{let l=h.value;if(l.cid==null)continue;let m=f+h.key,u=l.size;i.push({Name:m,Tsize:Number(u),Hash:l.cid})}}let o=Uint8Array.from(n.bitField().reverse()),s=new T({type:"hamt-sharded-directory",data:o,fanout:BigInt(r.tableSize()),hashType:kr,mtime:t?.mtime,mode:t?.mode});return F(R({Data:s.marshal(),Links:i})).length}var bn=C.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),_n=C.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");var Ji=$("helia:unixfs:commands:utils:hamt-utils"),En=r=>r.toString(16).toUpperCase().padStart(2,"0").substring(0,2),jc=async(r,t,e)=>{let n=new xn({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:e.mtime,mode:e.mode},e);for(let o=0;o<t.length;o++)await n._bucket.put(t[o].name,{size:t[o].size,cid:t[o].cid});let i=await Kt(n.flush(r));if(i==null)throw new Error("Flushing shard yielded no result");return i},An=async(r,t,e)=>{let n=T.unmarshal(r[0].node.Data??new Uint8Array(0)),i=BigInt(Math.pow(2,he));r.reverse();let o,s;for(let a=0;a<r.length;a++){let c=a===r.length-1,h=r[a],f=Uint8Array.from(h.children.bitField().reverse()),l=new T({type:"hamt-sharded-directory",data:f,fanout:i,hashType:kr});c&&(l.mtime=n.mtime,l.mode=n.mode),s={Data:l.marshal(),Links:h.node.Links};let m=F(R(s));if(o=await It(m,t,e),!c){let u=r[a+1];if(u==null)throw new Error("Was not operating on shard root but also had no parent?");Ji("updating link in parent sub-shard with prefix %s",u.prefix),u.node.Links=u.node.Links.filter(d=>d.Name!==u.prefix),u.node.Links.push({Name:u.prefix,Hash:o,Tsize:h.node.Links.reduce((d,y)=>d+(y.Tsize??0),m.byteLength)})}}if(o==null||s==null)throw new Error("Noting persisted");return{cid:o,node:s}},Sn=async(r,t,e,n)=>{let o=wn($e)(wt(t)),s=[];for(;;){let a=await e.get(r,n),c=V(a),h=new Hc.default,f=await o.take(he),l=En(f);s.push({prefix:l,children:h,node:c});let m;for(let d of c.Links){let y=d.Name??"";if(y.length<2)throw new Error("Invalid HAMT - link name was too short");let _=parseInt(y.substring(0,2),16);h.set(_,!0),y.startsWith(l)&&(m=d)}if(m==null){Ji("no link found with prefix %s for %s",l,t);break}let u=m.Name??"";if(u.length<2)throw new Error("Invalid HAMT - link name was too short");if(u.length===2){r=m.Hash,Ji("descend into sub-shard with prefix %s",u);continue}break}return{path:s,hash:o}};async function kn(r,t,e,n){if(r.Data==null)throw new Error("DagPB node had no data");let i=T.unmarshal(r.Data),o;if(i.type==="directory")o=m1(r);else if(i.type==="hamt-sharded-directory")o=await Gc(r,0,e,t,n);else throw new Error("Can only estimate the size of directories or shards");return o>e}function m1(r){let t=0;for(let e of r.Links)t+=(e.Name??"").length,t+=e.Hash.version===1?_n.bytes.byteLength:bn.bytes.byteLength;return t}async function Gc(r,t,e,n,i){if(t>e)return e;if(r.Data==null||!T.unmarshal(r.Data).isDirectory())return t;for(let s of r.Links){let a=s.Name??"";if(a=a.substring(2),t+=a.length,t+=s.Hash.bytes.byteLength,s.Hash.code===G){let c=await n.get(s.Hash,i),h=V(c);t+=await Gc(h,t,e,n,i)}}return t}var Ft=$("helia:unixfs:components:utils:add-link");async function Ve(r,t,e,n){if(r.node.Data==null)throw new Y("Invalid parent passed to addLink");if(T.unmarshal(r.node.Data).type==="hamt-sharded-directory")return Ft("adding link to sharded directory"),w1(r,t,e,n);Ft(`adding ${t.Name} (${t.Hash}) to regular directory`);let o=await g1(r,t,e,n);if(await kn(o.node,e,n.shardSplitThresholdBytes,n)){Ft("converting directory to sharded directory");let s=await y1(o,e);o.cid=s.cid,o.node=V(await e.get(s.cid,n))}return o}var y1=async(r,t)=>{if(r.node.Data==null)throw new Y("Invalid parent passed to convertToShardedDirectory");let e=T.unmarshal(r.node.Data),n=await jc(t,r.node.Links.map(i=>({name:i.Name??"",size:BigInt(i.Tsize??0),cid:i.Hash})),{mode:e.mode,mtime:e.mtime,cidVersion:r.cid.version});return Ft(`converted directory to sharded directory ${n.cid}`),n},g1=async(r,t,e,n)=>{let i=r.node.Links.filter(f=>{let l=f.Name===t.Name;if(l&&!n.allowOverwriting)throw new fe;return!l});if(i.push(t),r.node.Data==null)throw new rt("Parent node with no data passed to addToDirectory");let o=T.unmarshal(r.node.Data),s;if(o.mtime!=null){let f=Date.now(),l=Math.floor(f/1e3);o.mtime={secs:BigInt(l),nsecs:(f-l*1e3)*1e3},s=o.marshal()}else s=r.node.Data;r.node=R({Data:s,Links:i});let a=F(r.node),c=await at.digest(a),h=C.create(r.cid.version,G,c);return await e.put(h,a),{node:r.node,cid:h}},w1=async(r,t,e,n)=>{let{path:i,hash:o}=await Sn(r.cid,t.Name,e,n),s=i[i.length-1];if(s==null)throw new Error("Invalid HAMT, could not generate path");let a=s.prefix,c=parseInt(a,16);Ft("next prefix for %s is %s",t.Name,a);let h=`${a}${t.Name}`,f=s.node.Links.find(l=>(l.Name??"").startsWith(a));if(f!=null)if(Ft("link %s was present in shard",h),f.Name===h){if(!n.allowOverwriting)throw new fe;Ft("overwriting %s in subshard",t.Name),s.node.Links=s.node.Links.filter(l=>l.Name!==h),s.node.Links.push({Name:h,Hash:t.Hash,Tsize:t.Tsize})}else{if(f.Name?.length===2)throw new Error("Existing link was subshard?!");{Ft("prefix %s already exists, creating new subshard",a);let l=s.node.Links.findIndex(_=>_.Name?.startsWith(a)),m=s.node.Links.splice(l,1)[0],u=(m.Name??"").substring(2),y=wn($e)(wt(u));for(let _=0;_<i.length;_++)await y.take(he);for(;;){let _=await y.take(he),g=En(_);m.Name=`${g}${u}`;let w=await o.take(he),b=En(w);if(g===b){let v=new Zi.default;v.set(w,!0),i.push({prefix:b,children:v,node:{Links:[]}});continue}let E=new Zi.default;E.set(w,!0),E.set(_,!0),i.push({prefix:a,children:E,node:{Links:[m,{Name:`${b}${t.Name}`,Hash:t.Hash,Tsize:t.Tsize}]}});break}}}else Ft("link %s was not present in sub-shard",h),t.Name=h,s.node.Links.push(t),s.children.set(c,!0),Ft("adding %s to existing sub-shard",h);return An(i,e,n)};async function Jt(r,t,e={}){let n=await et(r,t,e);if(n.type!=="directory")throw new Dt(`${r.toString()} was not a UnixFS directory`);return{cid:r,node:n.node}}async function Me(r,t,e,n){let i=await et(r,e,n);if(i.type!=="directory"&&i.type!=="file"&&i.type!=="raw")throw new Ct(`${r.toString()} was not a UnixFS node`);return{Name:t,Tsize:i.node instanceof Uint8Array?i.node.byteLength:x1(i.node),Hash:r}}function x1(r){let t=r.Links.reduce((e,n)=>e+(n.Tsize??0),0);return F(r).byteLength+t}var b1=$("helia:unixfs:components:utils:resolve");async function Lt(r,t,e,n){if(t==null||t==="")return{cid:r};let i=`/ipfs/${r}${t==null?"":`/${t}`}`,o=await bi(Yi(i,e,n));if(o.length===0)throw new Ot("Could not find path in directory");return b1("resolved %s to %c",t,r),{cid:o[o.length-1].cid,path:t,segments:o}}async function He(r,t,e,n){if(t.segments==null||t.segments.length===0)return r;let i=t.segments.pop();if(i==null)throw new Error("Insufficient segments");i.cid=r,t.segments.reverse();for(let o of t.segments){let[s,a]=await Promise.all([Jt(o.cid,e,n),Me(i.cid,i.name,e,n)]);r=(await Ve(s,a,e,{...n,allowOverwriting:!0,cidVersion:r.version})).cid,o.cid=r,i=o}return r}var _1=Z.bind({ignoreUndefined:!0}),E1={};async function*Wc(r,t,e={}){let n=_1(E1,e),i=await Lt(r,n.path,t,n),o=await et(i.cid,t,n);if(o.type!=="file"&&o.type!=="raw")throw new pn;if(o.content==null)throw new Pe;yield*o.content(n)}var A1=Z.bind({ignoreUndefined:!0}),S1=$("helia:unixfs:chmod"),k1={recursive:!1,shardSplitThresholdBytes:262144};async function Yc(r,t,e,n={}){let i=A1(k1,n),o=await Lt(r,i.path,e,n);if(S1("chmod %c %d",o.cid,t),i.recursive){let m=await Nt(async function*(){for await(let u of ln(o.cid,e,n)){let d,y=[];if(u.type==="raw")d=new T({type:"file",data:u.node});else if(u.type==="file"||u.type==="directory")d=u.unixfs,y=u.node.Links;else throw new Ct;d.mode=t;let _={Data:d.marshal(),Links:y};yield{path:u.path,content:_}}},u=>Yt(u,e,{...i,dagBuilder:async function*(d,y){for await(let _ of d)yield async function(){let g=_.content,w=F(g),b=await It(w,y,{...i,cidVersion:r.version});if(g.Data==null)throw new rt(`${b} had no data`);let E=T.unmarshal(g.Data);return{cid:b,size:BigInt(w.length),path:_.path,unixfs:E}}}}),async u=>Kt(u));if(m==null)throw new Rt(`Could not chmod ${o.cid.toString()}`);return He(m.cid,o,e,i)}let s=await e.get(o.cid,n),a,c=[];if(o.cid.code===it)a=new T({type:"file",data:s});else{let m=V(s);if(m.Data==null)throw new rt(`${o.cid.toString()} had no data`);c=m.Links,a=T.unmarshal(m.Data)}a.mode=t;let h=F({Data:a.marshal(),Links:c}),f=await at.digest(h),l=C.create(o.cid.version,G,f);return await e.put(l,h),He(l,o,e,i)}var B1=Z.bind({ignoreUndefined:!0}),I1=$("helia:unixfs:cp"),v1={force:!1,shardSplitThresholdBytes:262144};async function Kc(r,t,e,n,i={}){let o=B1(v1,i);if(e.includes("/"))throw new Y("Name must not have slashes");let[s,a]=await Promise.all([Jt(t,n,o),Me(r,e,n,o)]);return I1('Adding %c as "%s" to %c',r,e,t),(await Ve(s,a,n,{allowOverwriting:o.force,cidVersion:t.version,...o})).cid}var T1=Z.bind({ignoreUndefined:!0}),N1={};async function*qc(r,t,e={}){let n=T1(N1,e),i=await Lt(r,n.path,t,n),o=await et(i.cid,t);if(o.type==="file"||o.type==="raw"){yield o;return}if(o.content==null)throw new Pe;if(o.type!=="directory")throw new Dt;yield*o.content({offset:e.offset,length:e.length})}var C1=Z.bind({ignoreUndefined:!0}),Xc=$("helia:unixfs:mkdir"),D1={cidVersion:1,force:!1,shardSplitThresholdBytes:262144};async function Jc(r,t,e,n={}){let i=C1(D1,n);if(t.includes("/"))throw new Y("Path must not have slashes");if((await et(r,e,n)).type!=="directory")throw new Dt(`${r.toString()} was not a UnixFS directory`);Xc("creating %s",t);let a={Data:new T({type:"directory",mode:i.mode,mtime:i.mtime}).marshal(),Links:[]},c=F(a),h=await at.digest(c),f=C.create(i.cidVersion,G,h);await e.put(f,c);let[l,m]=await Promise.all([Jt(r,e,i),Me(f,t,e,i)]);return Xc("adding empty dir called %s to %c",t,r),(await Ve(l,m,e,{...i,allowOverwriting:i.force})).cid}var Bn=$("helia:unixfs:utils:remove-link");async function Zc(r,t,e,n){if(r.node.Data==null)throw new rt("Parent node had no data");if(T.unmarshal(r.node.Data).type==="hamt-sharded-directory"){Bn(`removing ${t} from sharded directory`);let o=await L1(r,t,e,n);return await kn(o.node,e,n.shardSplitThresholdBytes,n)?o:(Bn("converting shard to flat directory %c",r.cid),U1(o,e,n))}return Bn(`removing link ${t} regular directory`),F1(r,t,e,n)}var F1=async(r,t,e,n)=>{r.node.Links=r.node.Links.filter(s=>s.Name!==t);let i=F(r.node),o=await It(i,e,{...n,cidVersion:r.cid.version});return Bn(`Updated regular directory ${o}`),{node:r.node,cid:o}},L1=async(r,t,e,n)=>{let{path:i}=await Sn(r.cid,t,e,n),o=i[i.length-1];if(o==null)throw new Error("Invalid HAMT, could not generate path");let s=o.node.Links.filter(h=>(h.Name??"").substring(2)===t).map(h=>h.Name).pop();if(s==null)throw new Error("File not found");let a=s.substring(0,2),c=parseInt(a,16);if(o.node.Links=o.node.Links.filter(h=>h.Name!==s),o.children.unset(c),o.node.Links.length===1)for(;i.length!==1;){let h=i[i.length-1];if(h==null||h.node.Links.length>1)break;i.pop();let f=i[i.length-1];if(f==null)break;let l=h.node.Links[0];f.node.Links=f.node.Links.filter(m=>!(m.Name??"").startsWith(f.prefix)),f.node.Links.push({Hash:l.Hash,Name:`${f.prefix}${(l.Name??"").substring(2)}`,Tsize:l.Tsize})}return An(i,e,n)},U1=async(r,t,e)=>{if(r.node.Data==null)throw new Y("Invalid parent passed to convertToFlatDirectory");let n={Links:[]},i=await et(r.cid,t);if(i.type!=="directory")throw new Error("Unexpected node type");for await(let c of i.content()){let h=0;c.node instanceof Uint8Array?h=c.node.byteLength:h=F(c.node).length,n.Links.push({Hash:c.cid,Name:c.name,Tsize:h})}let o=T.unmarshal(r.node.Data);n.Data=new T({type:"directory",mode:o.mode,mtime:o.mtime}).marshal();let s=F(R(n));return{cid:await It(s,t,{codec:M,cidVersion:r.cid.version,signal:e.signal}),node:n}};var P1=Z.bind({ignoreUndefined:!0}),z1=$("helia:unixfs:rm"),R1={shardSplitThresholdBytes:262144};async function Qc(r,t,e,n={}){let i=P1(R1,n);if(t.includes("/"))throw new Y("Name must not have slashes");let o=await Jt(r,e,i);return z1("Removing %s from %c",t,r),(await Zc(o,t,e,{...i,cidVersion:r.version})).cid}var O1=Z.bind({ignoreUndefined:!0}),$1=$("helia:unixfs:stat"),V1={};async function tu(r,t,e={}){let n=O1(V1,e),i=await Lt(r,e.path,t,n);$1("stat %c",i.cid);let o=await et(i.cid,t,n);if(o.type!=="file"&&o.type!=="directory"&&o.type!=="raw")throw new Ct;let s=0n,a=0n,c=0n,h=0n,f=0,l,m,u=o.type,d;if(o.type==="raw"&&(s=BigInt(o.node.byteLength),a=BigInt(o.node.byteLength),c=BigInt(o.node.byteLength),h=BigInt(o.node.byteLength),f=1),o.type==="directory"&&(s=0n,a=BigInt(o.unixfs.marshal().byteLength),c=0n,h=a,f=1,l=o.unixfs.mode,m=o.unixfs.mtime,d=o.unixfs),o.type==="file"){let y=await eu(i.cid,t,n);s=o.unixfs.fileSize(),a=BigInt((o.node.Data?.byteLength??0)+o.node.Links.reduce((_,g)=>_+(g.Tsize??0),0)),c=BigInt(y.localFileSize),h=BigInt(y.localDagSize),f=y.blocks,l=o.unixfs.mode,m=o.unixfs.mtime,d=o.unixfs}return{cid:i.cid,mode:l,mtime:m,fileSize:s,dagSize:a,localFileSize:c,localDagSize:h,blocks:f,type:u,unixfs:d}}async function eu(r,t,e){let n={localFileSize:0,localDagSize:0,blocks:0};if(await t.has(r,e)){let i=await t.get(r,e);if(n.blocks++,n.localDagSize+=i.byteLength,r.code===it)n.localFileSize+=i.byteLength;else if(r.code===G){let o=V(i);if(o.Links.length>0)for(let s of o.Links){let a=await eu(s.Hash,t,e);n.localFileSize+=a.localFileSize,n.localDagSize+=a.localDagSize,n.blocks+=a.blocks}else{if(o.Data==null)throw new rt(`PBNode ${r.toString()} had no data`);let s=T.unmarshal(o.Data);if(s.data==null)throw new rt(`UnixFS node ${r.toString()} had no data`);n.localFileSize+=s.data.byteLength??0}}else throw new Rt(`${r.toString()} was neither DAG_PB nor RAW`)}return n}var M1=Z.bind({ignoreUndefined:!0}),H1=$("helia:unixfs:touch"),j1={recursive:!1,shardSplitThresholdBytes:262144};async function ru(r,t,e={}){let n=M1(j1,e),i=await Lt(r,n.path,t,n),o=n.mtime??{secs:BigInt(Math.round(Date.now()/1e3)),nsecs:0};if(H1("touch %c %o",i.cid,o),n.recursive){let m=await Nt(async function*(){for await(let u of ln(i.cid,t)){let d,y;if(u.type==="raw")d=new T({data:u.node}),y=[];else if(u.type==="file"||u.type==="directory")d=u.unixfs,y=u.node.Links;else throw new Ct;d.mtime=o;let _={Data:d.marshal(),Links:y};yield{path:u.path,content:_}}},u=>Yt(u,t,{...n,dagBuilder:async function*(d,y){for await(let _ of d)yield async function(){let g=_.content,w=F(g),b=await It(w,y,{...n,cidVersion:r.version});if(g.Data==null)throw new rt(`${b} had no data`);let E=T.unmarshal(g.Data);return{cid:b,size:BigInt(w.length),path:_.path,unixfs:E}}}}),async u=>Kt(u));if(m==null)throw new Rt(`Could not chmod ${i.cid.toString()}`);return He(m.cid,i,t,n)}let s=await t.get(i.cid,e),a,c=[];if(i.cid.code===it)a=new T({data:s});else{let m=V(s);if(c=m.Links,m.Data==null)throw new rt(`${i.cid.toString()} had no data`);a=T.unmarshal(m.Data)}a.mtime=o;let h=F({Data:a.marshal(),Links:c}),f=await at.digest(h),l=C.create(i.cid.version,G,f);return await t.put(l,h),He(l,i,t,n)}var Qi=class{components;constructor(t){this.components=t}async*addAll(t,e={}){yield*$s(t,this.components.blockstore,e)}async addBytes(t,e={}){return Vs(t,this.components.blockstore,e)}async addByteStream(t,e={}){return Ms(t,this.components.blockstore,e)}async addFile(t,e={}){return Hs(t,this.components.blockstore,e)}async addDirectory(t={},e={}){return js(t,this.components.blockstore,e)}async*cat(t,e={}){yield*Wc(t,this.components.blockstore,e)}async chmod(t,e,n={}){return Yc(t,e,this.components.blockstore,n)}async cp(t,e,n,i={}){return Kc(t,e,n,this.components.blockstore,i)}async*ls(t,e={}){yield*qc(t,this.components.blockstore,e)}async mkdir(t,e,n={}){return Jc(t,e,this.components.blockstore,n)}async rm(t,e,n={}){return Qc(t,e,this.components.blockstore,n)}async stat(t,e={}){return tu(t,this.components.blockstore,e)}async touch(t,e={}){return ru(t,this.components.blockstore,e)}};function nu(r){return new Qi(r)}function iu(r,t="utf8"){let e=Lr[t];if(e==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):e.encoder.encode(r).substring(1)}var Vt="/",ou=new TextEncoder().encode(Vt),In=ou[0],Br=class r{_buf;constructor(t,e){if(typeof t=="string")this._buf=wt(t);else if(t instanceof Uint8Array)this._buf=t;else throw new Error("Invalid key, should be String of Uint8Array");if(e==null&&(e=!0),e&&this.clean(),this._buf.byteLength===0||this._buf[0]!==In)throw new Error("Invalid key")}toString(t="utf8"){return iu(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new r(t.join(Vt))}static random(){return new r(Math.random().toString().substring(2))}static asKey(t){return t instanceof Uint8Array||typeof t=="string"?new r(t):typeof t.uint8Array=="function"?new r(t.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=ou),this._buf[0]!==In){let t=new Uint8Array(this._buf.byteLength+1);t.fill(In,0,1),t.set(this._buf,1),this._buf=t}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===In;)this._buf=this._buf.subarray(0,-1)}less(t){let e=this.list(),n=t.list();for(let i=0;i<e.length;i++){if(n.length<i+1)return!1;let o=e[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return e.length<n.length}reverse(){return r.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(Vt).slice(1)}type(){return G1(this.baseNamespace())}name(){return W1(this.baseNamespace())}instance(t){return new r(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(Vt)||(t+=Vt),t+=this.type(),new r(t)}parent(){let t=this.list();return t.length===1?new r(Vt):new r(t.slice(0,-1).join(Vt))}child(t){return this.toString()===Vt?t:t.toString()===Vt?this:new r(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()===this.toString()?!1:t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()===this.toString()?!1:this.toString().startsWith(t.toString())}isTopLevel(){return this.list().length===1}concat(...t){return r.withNamespaces([...this.namespaces(),...Y1(t.map(e=>e.namespaces()))])}};function G1(r){let t=r.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function W1(r){let t=r.split(":");return t[t.length-1]}function Y1(r){return[].concat(...r)}function vn(r){return r.split("/").pop()??""}var K1=$("helia:mfs"),to=class{components;unixfs;root;key;constructor(t,e={}){this.components=t,this.key=new Br(e.key??"/locals/filesroot"),this.unixfs=nu(t)}async#t(){if(this.root==null)try{let t=await this.components.datastore.get(this.key);this.root=C.decode(t)}catch(t){if(t.code!=="ERR_NOT_FOUND")throw t;this.root=await this.unixfs.addDirectory()}return this.root}async writeBytes(t,e,n){let i=await this.unixfs.addFile({content:t,mode:n?.mode,mtime:n?.mtime},n);await this.cp(i,e,n)}async writeByteStream(t,e,n){let i=await this.unixfs.addFile({content:t,mode:n?.mode,mtime:n?.mtime},n);await this.cp(i,e,n)}async*cat(t,e={}){let n=await this.#t(),i=await this.#r(n,t,{...e,createMissingDirectories:!1,finalSegmentMustBeDirectory:!1});yield*this.unixfs.cat(i[i.length-1].cid,e)}async chmod(t,e,n={}){let i=await this.#t();this.root=await this.unixfs.chmod(i,e,{...n,path:t})}async cp(t,e,n){let i=await this.#t(),o=n?.force??!1;typeof t=="string"&&(t=(await this.stat(t,n)).cid),o||await this.#s(e,n);let s=vn(e),a=e.substring(0,e.length-`/${s}`.length),c=[{cid:i,name:""}];a!==""&&(c=await this.#r(i,a,{...n,createMissingDirectories:n?.force??!1,finalSegmentMustBeDirectory:!0})),c.push({cid:t,name:s}),this.root=await this.#n(c,n)}async*ls(t,e){let n=await this.#t();e?.path!=null&&(t=`${t}/${e.path}`),yield*this.unixfs.ls(n,{...e,path:t})}async mkdir(t,e){let n=e?.force??!1;n||await this.#s(t,e);let i=vn(t),o=t.substring(0,t.length-`/${i}`.length),s=await this.#t(),a=[{cid:s,name:""}];o!==""&&(a=await this.#r(s,o,{...e,createMissingDirectories:n,finalSegmentMustBeDirectory:!0})),a.push({cid:await this.unixfs.addDirectory({mode:e?.mode,mtime:e?.mtime},e),name:vn(t)}),this.root=await this.#n(a,e)}async rm(t,e){(e?.force??!1)||await this.#u(t,e);let i=await this.#t(),o=await this.#r(i,t,{...e,createMissingDirectories:!1,finalSegmentMustBeDirectory:!1}),s=o.pop();if(s==null)throw new Y("path was too short");let a=o[o.length-1];a.cid=await this.unixfs.rm(a.cid,s.name,e),this.root=await this.#n(o,e)}async stat(t,e){let n=await this.#t(),o=(await this.#r(n,t,{...e,createMissingDirectories:!1,finalSegmentMustBeDirectory:!1})).pop();if(o==null)throw new Ot;return this.unixfs.stat(o.cid,{...e})}async touch(t,e){let n=await this.#t(),i=await this.#r(n,t,{...e,createMissingDirectories:!1,finalSegmentMustBeDirectory:!1}),o=i[i.length-1];if(o==null)throw new Ot;o.cid=await this.unixfs.touch(o.cid,e),this.root=await this.#n(i,e)}async#r(t,e,n){if(!e.startsWith("/"))throw new Y("path must be absolute");let i=await this.unixfs.stat(t,{...n,offline:!0}),o=[{cid:t,name:"",unixfs:i.unixfs}],s=t,a=e.split("/").filter(Boolean);for(let h=0;h<a.length;h++){let f=a[h];try{let l=await this.unixfs.stat(s,{...n,offline:!0,path:f});o.push({cid:l.cid,name:f,unixfs:l.unixfs}),s=l.cid}catch{if(K1.error("could not resolve path segment %s of %s under %c",f,e,t),n.createMissingDirectories){let m=await this.unixfs.addDirectory();o.push({cid:m,name:f,unixfs:new T({type:"directory"})})}else throw new Ot(`${e} does not exist`)}}let c=o[o.length-1];if(n.finalSegmentMustBeDirectory&&c.unixfs?.isDirectory()!==!0)throw new Dt(`${e} was not a directory`);return o}async#n(t,e={}){let n=t.pop();if(n==null)throw new Y("path was too short");let i=n.cid;for(let o=t.length-1;o>-1;o--){let s=t[o];s.cid=await this.unixfs.cp(n.cid,s.cid,n.name,{...e,force:!0}),n=s,i=s.cid}return await this.components.datastore.put(this.key,i.bytes,e),i}async#u(t,e={}){if(!await this.#c(t,e))throw new Ot}async#s(t,e={}){if(await this.#c(t,e))throw new fe}async#c(t,e={}){try{return await this.stat(t,{...e,offline:!0}),!0}catch{return!1}}};function q1(r,t={}){return new to(r,t)}return lu(X1);})();
return HeliaMfs}));
